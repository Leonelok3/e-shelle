{% extends "base.html" %}

{% block title %}
Programmes RÃ©sidence Permanente â€“ Canada / Australie | immigration97
{% endblock %}

{% block meta_description %}
Catalogue des programmes de RÃ©sidence Permanente (EntrÃ©e Express, PNP, visas australiens, etc.)
avec filtres par pays et catÃ©gorie.
{% endblock %}

{% block content %}
<div class="rp-program-list-page">

  <!-- HERO -->
  <section class="rp-program-list-hero">
    <div class="rp-program-list-hero-header">

      <div>
        <p class="rp-program-list-kicker">
          BibliothÃ¨que de programmes Â· RÃ©sidence Permanente
        </p>
        <h1 class="rp-program-list-title">
          Trouve les programmes RP adaptÃ©s Ã  ton profil
        </h1>
        <p class="rp-program-list-desc">
          Filtre les programmes par pays et catÃ©gorie, consulte chaque fiche
          et accÃ¨de aux sources officielles.
        </p>
      </div>

      <aside class="rp-program-list-side">
        <div class="rp-program-list-side-box">
          <strong>Astuce</strong>
          <p>
            Utilise ton diagnostic RP pour identifier les programmes
            les plus pertinents.
          </p>
          <a href="{% url 'permanent_residence:dashboard' %}">
            ðŸ“Š Ouvrir le cockpit RP
          </a>
        </div>
      </aside>

    </div>
  </section>

  <!-- FILTERS -->
  <section class="rp-program-filters">

    <div class="rp-filter-group">
      <p class="rp-filter-label">Pays</p>
      <div class="rp-filter-items">
        <a href="{% url 'permanent_residence:program_list' %}"
           class="rp-filter-pill {% if not selected_country %}active{% endif %}">
          Tous
        </a>
        {% for code in available_countries %}
          <a href="?country={{ code }}{% if selected_category %}&category={{ selected_category }}{% endif %}"
             class="rp-filter-pill {% if selected_country == code %}active{% endif %}">
            {% if code == "CA" %}ðŸ‡¨ðŸ‡¦ Canada{% elif code == "AU" %}ðŸ‡¦ðŸ‡º Australie{% else %}{{ code }}{% endif %}
          </a>
        {% endfor %}
      </div>
    </div>

    <div class="rp-filter-group">
      <p class="rp-filter-label">CatÃ©gories</p>
      <div class="rp-filter-items">
        <a href="{% url 'permanent_residence:program_list' %}"
           class="rp-filter-pill {% if not selected_category %}active{% endif %}">
          Toutes
        </a>
        {% for cat in categories %}
          <a href="?category={{ cat }}{% if selected_country %}&country={{ selected_country }}{% endif %}"
             class="rp-filter-pill {% if selected_category == cat %}active{% endif %}">
            {{ cat }}
          </a>
        {% endfor %}
      </div>
    </div>

  </section>

  <!-- LIST -->
  <section class="rp-program-list-box">

    {% if programs %}
      <div class="rp-program-grid">
        {% for program in programs %}
          <article class="rp-program-card">

            <div>
              <h3 class="rp-program-card-title">{{ program.name }}</h3>
              <span class="rp-program-card-badge">
                {% if program.country == "CA" %}ðŸ‡¨ðŸ‡¦ Canada{% elif program.country == "AU" %}ðŸ‡¦ðŸ‡º Australie{% else %}RP{% endif %}
              </span>

              {% if program.category %}
                <div class="rp-program-card-category">{{ program.category }}</div>
              {% endif %}

              {% if program.summary %}
                <p class="rp-program-card-summary">
                  {{ program.summary }}
                </p>
              {% endif %}
            </div>

            <div class="rp-program-card-actions">
              <a href="{% url 'permanent_residence:program_detail' program.slug %}">
                Voir la fiche â†’
              </a>
              {% if program.official_url %}
                <a href="{{ program.official_url }}" target="_blank">Site officiel</a>
              {% endif %}
            </div>

          </article>
        {% endfor %}
      </div>
    {% else %}
      <p>Aucun programme ne correspond aux filtres.</p>
    {% endif %}

  </section>

</div>
{% endblock %}
