{% extends "base.html" %}
{% load static %}

{% block title %}
R√©sultat Diagnostic R√©sidence Permanente ‚Äì Canada / Australie | immigration97
{% endblock %}

{% block meta_description %}
Analyse intelligente de ton profil de R√©sidence Permanente (Canada / Australie) : points forts,
axes √† renforcer, programmes d‚Äôimmigration √† explorer et plan d‚Äôaction guid√© avec Immigration97.
{% endblock %}

{% block head_extra %}
<link rel="stylesheet" href="{% static 'css/pages/residence_permanente_nav.css' %}">
{% endblock %}

{% block content %}

{% include "permanent_residence/_rp_nav.html" %}

<div class="rp-result">

  <!-- ================= HERO ================= -->
  <section class="rp-card rp-result-hero">
    <div class="rp-result-hero__top">

      <div>
        <p class="rp-kicker">
          R√©sultat du diagnostic RP ¬∑ {{ profile.get_country_display }}
        </p>

        <h1 class="rp-title">
          Ton profil de R√©sidence Permanente, analys√©.
        </h1>

        <p class="rp-text">
          Voici une synth√®se de ton profil, les points forts, ce qui doit √™tre renforc√©
          et la progression de ton plan d‚Äôaction vers la R√©sidence Permanente.
        </p>
      </div>

      <div class="rp-result-hero__status">

        {% if evaluation.status == "profil_potentiellement_interessant" %}
          <span class="rp-badge rp-badge--success">‚úÖ Profil potentiellement int√©ressant</span>
        {% elif evaluation.status == "profil_a_renforcer" %}
          <span class="rp-badge rp-badge--warning">‚ö†Ô∏è Profil √† renforcer</span>
        {% elif evaluation.status == "profil_incomplet_ou_faible" %}
          <span class="rp-badge rp-badge--danger">üß© Profil incomplet / faible</span>
        {% else %}
          <span class="rp-badge">Profil analys√©</span>
        {% endif %}

        <div class="rp-progress">
          <p class="rp-progress__label">Progression du plan d‚Äôaction</p>
          <div class="rp-progress__bar">
            <div class="rp-progress__fill" style="width: {{ progress_percent }}%;"></div>
          </div>
          <p class="rp-progress__value">{{ progress_percent }}% compl√©t√©</p>
        </div>

      </div>
    </div>

    <div class="rp-result-hero__actions">
      <a href="{% url 'permanent_residence:plan' profile.id %}" class="rp-btn rp-btn--primary">
        üìù Ouvrir mon plan d‚Äôaction RP
      </a>
      <a href="{% url 'permanent_residence:dashboard' %}" class="rp-btn rp-btn--outline">
        üìä Voir le cockpit RP
      </a>
      <a href="{% url 'permanent_residence:coach' %}" class="rp-btn rp-btn--info">
        ü§ñ Parler au coach IA RP
      </a>
    </div>
  </section>

  <!-- ================= SYNTH√àSE ================= -->
  <div class="rp-grid">

    <section class="rp-card rp-result-summary">
      <h2 class="rp-section-title">Synth√®se de ton profil</h2>

      <p class="rp-text">{{ evaluation.summary }}</p>

      <div class="rp-result-columns">

        <div>
          <h3 class="rp-subtitle rp-subtitle--success">Points positifs</h3>
          {% if evaluation.reasons %}
            <ul class="rp-list">
              {% for reason in evaluation.reasons %}
                <li>{{ reason }}</li>
              {% endfor %}
            </ul>
          {% else %}
            <p class="rp-muted">Les points positifs seront affich√©s ici.</p>
          {% endif %}
        </div>

        <div>
          <h3 class="rp-subtitle rp-subtitle--warning">Axes √† renforcer / conseils</h3>
          {% if evaluation.suggestions %}
            <ul class="rp-list">
              {% for suggestion in evaluation.suggestions %}
                <li>{{ suggestion }}</li>
              {% endfor %}
            </ul>
          {% else %}
            <p class="rp-muted">Les pistes d‚Äôam√©lioration seront affich√©es ici.</p>
          {% endif %}
        </div>

      </div>
    </section>

    <!-- ================= R√âSUM√â TECHNIQUE ================= -->
    <aside class="rp-card rp-result-tech">
      <h2 class="rp-section-title">R√©sum√© technique</h2>

      <dl class="rp-definition-list">
        <div><dt>Pays cibl√©</dt><dd>{{ profile.get_country_display }}</dd></div>
        <div><dt>√Çge</dt><dd>{{ profile.age|default:"‚Äî" }}</dd></div>
        <div><dt>Exp√©rience</dt><dd>{{ profile.years_experience|default:"‚Äî" }}</dd></div>
        <div><dt>√âtudes</dt><dd>{{ profile.get_education_level_display|default:"‚Äî" }}</dd></div>
        <div><dt>Fran√ßais</dt><dd>{{ profile.get_french_level_display|default:"‚Äî" }}</dd></div>
        <div><dt>Anglais</dt><dd>{{ profile.get_english_level_display|default:"‚Äî" }}</dd></div>
        <div><dt>Profession</dt><dd>{{ profile.profession_title|default:"‚Äî" }}</dd></div>
        <div><dt>Famille sur place</dt><dd>{% if profile.has_family_in_country %}Oui{% else %}Non{% endif %}</dd></div>
        <div><dt>Offre d‚Äôemploi</dt><dd>{% if profile.has_job_offer %}Oui{% else %}Non{% endif %}</dd></div>
      </dl>
    </aside>

  </div>

</div>

{% endblock %}
