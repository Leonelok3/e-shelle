{% extends "base.html" %}
{% load static %}

{% block body_class %}residence-permanente{% endblock %}
{% block app_scope %}residence-permanente{% endblock %}

{# ================= SEO ================= #}
{% block title %}
R√©sultat Diagnostic R√©sidence Permanente Canada & Australie | Immigration97
{% endblock %}

{% block meta_description %}
R√©sultat de votre diagnostic R√©sidence Permanente Canada / Australie :
analyse compl√®te de votre profil immigration, score, points forts,
axes √† renforcer et plan d‚Äôaction personnalis√© avec Immigration97.
{% endblock %}

{# ================= CSS (BLOCK CORRECT) ================= #}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/residence_permanente_nav.css' %}">
{% endblock %}

{% block content %}

{# ================= NAV RP UNIFI√âE ================= #}
{% include "permanent_residence/_rp_nav.html" %}


<div class="rp-result">

  <!-- ================= HERO ================= -->
  <section class="rp-card rp-result-hero">
    <div class="rp-result-hero__top">

      <div>
        <p class="rp-kicker">
          R√©sultat du diagnostic R√©sidence Permanente ¬∑ {{ profile.get_country_display }}
        </p>

        <h1 class="rp-title">
          R√©sultat de ton diagnostic R√©sidence Permanente
        </h1>

        <p class="rp-text">
          Cette analyse repose sur les crit√®res officiels des programmes de
          <strong>R√©sidence Permanente au Canada et en Australie</strong>.
          Elle t‚Äôindique clairement <strong>o√π tu te situes</strong>
          et <strong>comment am√©liorer ton dossier d‚Äôimmigration</strong>.
        </p>
      </div>

      <div class="rp-result-hero__status">

        {% if evaluation.status == "profil_potentiellement_interessant" %}
          <span class="rp-badge rp-badge--success">
            ‚úÖ Profil int√©ressant pour la R√©sidence Permanente
          </span>
        {% elif evaluation.status == "profil_a_renforcer" %}
          <span class="rp-badge rp-badge--warning">
            ‚ö†Ô∏è Profil √† renforcer avant d√©p√¥t
          </span>
        {% else %}
          <span class="rp-badge rp-badge--danger">
            üß© Profil insuffisant ou incomplet
          </span>
        {% endif %}

        <div class="rp-progress">
          <p class="rp-progress__label">Progression de ton plan RP</p>
          <div class="rp-progress__bar">
            <div class="rp-progress__fill" style="width: {{ progress_percent }}%;"></div>
          </div>
          <p class="rp-progress__value">{{ progress_percent }}% compl√©t√©</p>
        </div>

      </div>
    </div>

    <!-- CTA -->
    <div class="rp-result-hero__actions">
      <a href="{% url 'permanent_residence:plan' profile.id %}" class="rp-btn rp-btn--primary">
        üìù Voir mon plan d‚Äôaction RP
      </a>
      <a href="{% url 'permanent_residence:dashboard' %}" class="rp-btn rp-btn--secondary">
        üìä Acc√©der √† mon cockpit
      </a>
      <a href="{% url 'permanent_residence:coach' %}" class="rp-btn rp-btn--ai">
        ü§ñ Consulter le coach IA
      </a>
    </div>
  </section>

  <!-- ================= SYNTH√àSE ================= -->
  <div class="rp-grid">

    <section class="rp-card">
      <h2 class="rp-section-title">
        Synth√®se de ton profil de R√©sidence Permanente
      </h2>

      <p class="rp-text">{{ evaluation.summary }}</p>

      <div class="rp-result-columns">

        <div>
          <h3 class="rp-subtitle rp-subtitle--success">‚úîÔ∏è Points forts</h3>
          <ul class="rp-list">
            {% for reason in evaluation.reasons %}
              <li>{{ reason }}</li>
            {% endfor %}
          </ul>
        </div>

        <div>
          <h3 class="rp-subtitle rp-subtitle--warning">üîß Axes d‚Äôam√©lioration</h3>
          <ul class="rp-list">
            {% for suggestion in evaluation.suggestions %}
              <li>{{ suggestion }}</li>
            {% endfor %}
          </ul>
        </div>

      </div>
    </section>

  </div>

</div>

{% endblock %}
