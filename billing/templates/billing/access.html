{% extends "base.html" %}
{% load static %}

{% block title %}Mon Acc√®s Premium Immigration Canada ¬∑ Abonnement Visa & R√©sidence Permanente | Immigration97{% endblock %}

{% block meta_description %}G√©rez votre abonnement premium Immigration97 : acc√®s illimit√© aux outils visa Canada, r√©sidence permanente, tests IELTS TCF TEF, CV international, photo visa biom√©trique. Activez votre plan d√®s maintenant.{% endblock %}

{% block body_class %}billing{% endblock %}
{% block app_scope %}billing{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/billing.css' %}">
{% endblock %}

{% block content %}
<!-- Schema.org pour SEO -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Gestion Acc√®s Premium Immigration Canada",
  "description": "G√©rez votre abonnement premium pour acc√©der aux outils d'immigration : visa Canada, r√©sidence permanente, tests de langue, CV international",
  "provider": {
    "@type": "Organization",
    "name": "Immigration97",
    "url": "{{ request.scheme }}://{{ request.get_host }}"
  }
}
</script>

<div class="access-container">
    <!-- HEADER SEO -->
    <header class="access-header">
        <h1 class="access-title">Gestion de mon Acc√®s Premium Immigration</h1>
        <p class="access-subtitle">
            Votre abonnement pour visa Canada, r√©sidence permanente, tests IELTS/TCF/TEF, CV international et guides d'immigration officiels
        </p>
    </header>

    <!-- CARTE STATUT PRINCIPAL -->
    <article class="status-card">
        {% if active_subscription %}
            <div class="status-icon status-icon--active" aria-label="Abonnement actif">üõ°Ô∏è</div>
            
            <div class="status-content">
                <h2 class="status-text status-text--active">Abonnement Premium Actif</h2>
                
                <div class="status-details">
                    <p class="plan-name">
                        Plan <strong>{{ active_subscription.plan.name }}</strong>
                        <span class="badge badge-success">Actif</span>
                    </p>
                    
                    <div class="access-benefits">
                        <h3 class="benefits-title">üéØ Acc√®s illimit√© √† :</h3>
                        <ul class="benefits-list">
                            <li>‚úÖ G√©n√©rateur CV International ATS-Optimis√©</li>
                            <li>‚úÖ Photo Visa Biom√©trique (Format officiel)</li>
                            <li>‚úÖ Tests de langue : IELTS, TCF, TEF</li>
                            <li>‚úÖ Guides Visa Travail Canada & Europe</li>
                            <li>‚úÖ R√©sidence Permanente : Entr√©e Express, PNP</li>
                            <li>‚úÖ Assistance Immigration 24/7</li>
                            <li>‚úÖ Calculateur Score CRS & √âligibilit√©</li>
                        </ul>
                    </div>
                </div>
                
                <div class="expiry-info">
                    <div class="expiry-date">
                        üìÖ Expire le : <strong>{{ active_subscription.expires_at|date:"d F Y √† H:i" }}</strong>
                    </div>
                    <div class="days-remaining">
                        ‚è∞ <strong>{{ active_subscription.days_remaining }} jours restants</strong>
                    </div>
                    {% if active_subscription.days_remaining <= 7 %}
                    <div class="renewal-alert">
                        ‚ö†Ô∏è Pensez √† renouveler votre abonnement pour continuer √† profiter des outils premium
                    </div>
                    {% endif %}
                </div>
            </div>
            
            <div class="status-actions">
                <a href="/" class="btn btn-primary btn-lg">
                    üöÄ Acc√©der √† mes outils premium
                </a>
                <a href="{% url 'billing:pricing' %}" class="btn btn-secondary">
                    üîÑ Renouveler mon abonnement
                </a>
            </div>

        {% elif session_active %}
            <div class="status-icon status-icon--warning" aria-label="Acc√®s temporaire">‚è±Ô∏è</div>
            
            <div class="status-content">
                <h2 class="status-text status-text--warning">Acc√®s Temporaire Actif</h2>
                <p class="status-description">
                    Votre session d'essai est valide. Profitez-en pour tester nos outils d'immigration premium.
                </p>
                
                <div class="trial-features">
                    <p class="features-intro">üéÅ Acc√®s temporaire √† :</p>
                    <ul class="benefits-list">
                        <li>G√©n√©rateur CV (limit√©)</li>
                        <li>Photo Visa (3 formats)</li>
                        <li>Aper√ßu tests de langue</li>
                    </ul>
                </div>
            </div>
            
            <div class="status-actions">
                <a href="/" class="btn btn-primary">
                    ‚ñ∂Ô∏è Continuer l'exploration
                </a>
                <a href="{% url 'billing:pricing' %}" class="btn btn-secondary">
                    ‚≠ê Passer √† Premium
                </a>
            </div>

        {% else %}
            <div class="status-icon status-icon--inactive" aria-label="Pas d'acc√®s actif">üîì</div>
            
            <div class="status-content">
                <h2 class="status-text status-text--inactive">Aucun Acc√®s Actif</h2>
                <p class="status-description">
                    D√©bloquez tous les outils premium d'immigration Canada, visa travail, r√©sidence permanente, tests de langue IELTS/TCF/TEF et g√©n√©rateur CV international.
                </p>
                
                <div class="premium-teaser">
                    <h3 class="teaser-title">üéØ Que contient l'acc√®s Premium ?</h3>
                    <ul class="benefits-list">
                        <li>‚úÖ <strong>Visa Canada</strong> : Guide complet travail, √©tudes, PVT</li>
                        <li>‚úÖ <strong>R√©sidence Permanente</strong> : Entr√©e Express, PNP, parrainage</li>
                        <li>‚úÖ <strong>Tests de langue</strong> : IELTS, TCF, TEF avec exercices</li>
                        <li>‚úÖ <strong>CV International</strong> : Format ATS, mod√®les Canada/Europe</li>
                        <li>‚úÖ <strong>Photo Visa</strong> : Biom√©trique conforme normes officielles</li>
                        <li>‚úÖ <strong>Calculateurs</strong> : Score CRS, √©ligibilit√© immigration</li>
                        <li>‚úÖ <strong>Support 24/7</strong> : Assistance immigration personnalis√©e</li>
                    </ul>
                </div>
            </div>
            
            <div class="status-actions">
                <a href="{% url 'billing:pricing' %}" class="btn btn-primary btn-lg cta-pulse">
                    ‚≠ê D√©couvrir les Abonnements Premium
                </a>
                <a href="{% url 'billing:redeem' %}" class="btn btn-secondary">
                    üéüÔ∏è J'ai un code d'activation
                </a>
            </div>
        {% endif %}
    </article>

    <!-- SECTION PLANS DISPONIBLES -->
    <section class="plans-section">
        <div class="plans-header">
            <h2 class="plans-title">üíé Plans d'Abonnement Premium Immigration</h2>
            <p class="plans-description">
                Choisissez le plan qui correspond √† votre projet d'immigration au Canada : visa travail, r√©sidence permanente, √©tudes ou PVT. Tous les plans incluent l'acc√®s complet aux outils premium.
            </p>
        </div>
        
        <div class="plans-grid">
            {% for plan in plans %}
            <article class="mini-plan">
                <div class="plan-badge">
                    {% if plan.duration == 365 %}üèÜ Populaire
                    {% elif plan.duration == 30 %}‚ö° Essai
                    {% else %}üíº Pro{% endif %}
                </div>
                
                <div class="plan-content">
                    <h3 class="plan-title">{{ plan.name }}</h3>
                    <p class="plan-meta">
                        ‚è±Ô∏è {{ plan.get_duration_display }} d'acc√®s complet
                    </p>
                    <div class="plan-price">
                        <span class="price-amount">{{ plan.price_xaf|floatformat:0 }} FCFA</span>
                        <span class="price-period">
                            {% if plan.duration == 30 %}/ mois
                            {% elif plan.duration == 90 %}/ 3 mois
                            {% else %}/ an{% endif %}
                        </span>
                    </div>
                    
                    <ul class="plan-features">
                        <li>‚úÖ Tous les outils premium</li>
                        <li>‚úÖ Tests de langue illimit√©s</li>
                        <li>‚úÖ Support prioritaire</li>
                        {% if plan.duration >= 365 %}
                        <li>‚≠ê Consultation gratuite</li>
                        <li>‚≠ê Mises √† jour exclusives</li>
                        {% endif %}
                    </ul>
                </div>
                
                <div class="plan-action">
                    <a href="{% url 'billing:pricing' %}" class="btn btn-primary">
                        Choisir {{ plan.name }}
                    </a>
                </div>
            </article>
            {% endfor %}
        </div>
    </section>

    <!-- CTA FINAL -->
    <aside class="final-cta">
        <h3 class="cta-title">üéØ Pr√™t √† d√©marrer votre projet d'immigration ?</h3>
        <p class="cta-description">
            Rejoignez des milliers d'utilisateurs qui ont r√©ussi leur immigration au Canada gr√¢ce √† Immigration97. Acc√®s instantan√© √† tous les outils premium.
        </p>
        <div class="cta-buttons">
            <a href="{% url 'billing:pricing' %}" class="btn btn-primary btn-lg">
                üöÄ Commencer maintenant
            </a>
            <a href="/faq/" class="btn btn-secondary">
                ‚ùì Questions fr√©quentes
            </a>
        </div>
    </aside>

    <!-- TRUST SECTION -->
    <aside class="trust-section">
        <div class="trust-grid">
            <div class="trust-item">
                <div class="trust-icon">üîí</div>
                <h4 class="trust-title">Paiement S√©curis√©</h4>
                <p class="trust-text">Transactions crypt√©es SSL</p>
            </div>
            <div class="trust-item">
                <div class="trust-icon">üíØ</div>
                <h4 class="trust-title">Satisfait ou Rembours√©</h4>
                <p class="trust-text">Garantie 30 jours</p>
            </div>
            <div class="trust-item">
                <div class="trust-icon">‚ö°</div>
                <h4 class="trust-title">Acc√®s Instantan√©</h4>
                <p class="trust-text">Activation imm√©diate</p>
            </div>
            <div class="trust-item">
                <div class="trust-icon">üéì</div>
                <h4 class="trust-title">Expertise Certifi√©e</h4>
                <p class="trust-text">Outils valid√©s IRCC</p>
            </div>
        </div>
    </aside>

    <!-- FAQ RAPIDE -->
    <section class="quick-faq">
        <h3 class="faq-title">‚ùì Questions Fr√©quentes sur l'Abonnement Premium</h3>
        
        <div class="faq-item">
            <h4 class="faq-question">Que comprend l'abonnement premium Immigration97 ?</h4>
            <p class="faq-answer">
                L'acc√®s premium inclut : g√©n√©rateur CV international, photo visa biom√©trique, pr√©paration compl√®te tests IELTS/TCF/TEF, guides visa Canada (travail, √©tudes, RP), calculateurs immigration, et support 24/7.
            </p>
        </div>
        
        <div class="faq-item">
            <h4 class="faq-question">Comment activer mon abonnement premium ?</h4>
            <p class="faq-answer">
                Apr√®s paiement, votre acc√®s est activ√© instantan√©ment. Vous recevez un email de confirmation avec vos identifiants pour acc√©der imm√©diatement √† tous les outils premium d'immigration.
            </p>
        </div>
        
        <div class="faq-item">
            <h4 class="faq-question">Puis-je annuler mon abonnement ?</h4>
            <p class="faq-answer">
                Oui, vous pouvez annuler √† tout moment. Garantie satisfait ou rembours√© 30 jours. Votre acc√®s reste actif jusqu'√† la fin de la p√©riode pay√©e.
            </p>
        </div>
    </section>
</div>
{% endblock %}