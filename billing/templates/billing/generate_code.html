{% extends "base.html" %}
{% block title %}G√©n√©rer un Code d'Acc√®s ¬∑ Immigration97{% endblock %}

{% block content %}

<style>
  /* ---- Th√®me Immigration97 ‚Äì G√©n√©ration de code (UI 2026) ---- */

  .billing-generate-wrapper{
    max-width: 540px;
    margin: 0 auto;
    padding: 24px 16px 40px;
    animation: genFadeIn .45s ease-out;
  }

  .panel{
    background:
      radial-gradient(circle at top left, rgba(56,189,248,0.18), transparent 55%),
      radial-gradient(circle at bottom right, rgba(34,197,94,0.16), transparent 55%),
      rgba(15,23,42,0.94);
    border-radius: 24px;
    padding: 26px 22px 26px;
    border: 1px solid rgba(148,163,184,0.55);
    box-shadow:
      0 18px 38px rgba(15,23,42,0.88),
      0 0 40px rgba(6,182,212,0.18);
    color: #e5e7eb;
    backdrop-filter: blur(18px);
  }

  .panel h2{
    font-size: 1.7rem;
    margin-bottom: 18px;
    font-weight: 800;
    background: linear-gradient(135deg,#34d399,#06b6d4,#3b82f6);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    display:flex;
    align-items:center;
    gap:.4rem;
  }

  .form{
    margin-top: 4px;
  }

  .field{
    display:flex;
    flex-direction:column;
    gap:6px;
  }

  .field label{
    font-size:.88rem;
    font-weight:600;
    color:#e5e7eb;
  }

  .input{
    border-radius: 12px;
    border: 1px solid rgba(148,163,184,0.7);
    background: rgba(15,23,42,0.96);
    padding: 10px 12px;
    color:#e5e7eb;
    font-size:.9rem;
    outline:none;
    transition:
      border-color 150ms ease-out,
      box-shadow 180ms ease-out,
      background 150ms ease-out;
  }

  .input:focus{
    border-color: rgba(56,189,248,0.9);
    box-shadow:0 0 0 1px rgba(56,189,248,0.55), 0 12px 26px rgba(15,23,42,0.9);
    background:rgba(15,23,42,0.98);
  }

  .w-full{
    width:100%;
  }

  .mb-3{
    margin-bottom: 14px;
  }

  .mt-2{
    margin-top:.5rem;
  }

  .mt-3{
    margin-top:.75rem;
  }

  .btn{
    display:inline-flex;
    align-items:center;
    justify-content:center;
    padding:10px 16px;
    border-radius:999px;
    border:1px solid rgba(148,163,184,0.6);
    background:rgba(15,23,42,0.95);
    color:#e5e7eb;
    font-size:.9rem;
    font-weight:600;
    text-decoration:none;
    cursor:pointer;
    gap:.35rem;
    transition:
      background 180ms ease-out,
      border-color 160ms ease-out,
      transform 140ms ease-out,
      box-shadow 180ms ease-out,
      color 160ms ease-out;
  }

  .btn:hover{
    border-color:rgba(248,250,252,0.9);
    background:radial-gradient(circle at top left,rgba(56,189,248,0.25),rgba(15,23,42,1));
    color:#f9fafb;
    transform:translateY(-1px);
    box-shadow:0 10px 26px rgba(15,23,42,0.9);
  }

  .btn-primary{
    background:linear-gradient(135deg,#06b6d4,#3b82f6);
    border-color:transparent;
    color:#020617;
    box-shadow:0 10px 26px rgba(37,99,235,0.65);
  }

  .btn-primary:hover{
    box-shadow:0 14px 36px rgba(37,99,235,0.85);
  }

  .muted{
    color:#94a3b8;
    font-size:.86rem;
  }

  .text-center{
    text-align:center;
  }

  .link{
    color:#38bdf8;
    text-decoration:none;
    font-weight:500;
  }

  .link:hover{
    text-decoration:underline;
    color:#7dd3fc;
  }

  @keyframes genFadeIn{
    from{opacity:0; transform:translateY(10px);}
    to{opacity:1; transform:translateY(0);}
  }
</style>

<div class="billing-generate-wrapper">
  <div class="panel" style="max-width:480px; margin:0 auto;">
    <h2>ü™Ñ G√©n√©rer un code d'acc√®s</h2>

    <form method="post" class="form">
      {% csrf_token %}

      <div class="field mb-3">
        <label for="validity">Dur√©e de validit√© du code</label>
        <select name="validity" id="validity" class="input w-full">
          <option value="24h">24 heures</option>
          <option value="30j">30 jours</option>
        </select>
      </div>

      <div class="field mb-3">
        <label for="plan">S√©lectionnez un plan (facultatif)</label>
        <select name="plan" id="plan" class="input w-full">
          {% for plan in plans %}
            <option value="{{ plan.slug }}">{{ plan.name }} ‚Äî {{ plan.price_usd }} USD</option>
          {% empty %}
            <option disabled>Aucun plan actif disponible</option>
          {% endfor %}
        </select>
      </div>

      <button class="btn btn-primary w-full mt-2" type="submit">
        ‚öôÔ∏è G√©n√©rer le code
      </button>
    </form>

    <p class="muted mt-3 text-center">
      Une fois g√©n√©r√©, le code sera valide pendant la dur√©e choisie.<br>
      <a href="{% url 'billing:redeem' %}" class="link">‚û°Ô∏è Aller valider un code existant</a>
    </p>
  </div>
</div>
{% endblock %}
