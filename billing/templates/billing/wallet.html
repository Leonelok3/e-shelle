{% extends "base.html" %}
{% block title %}Mon portefeuille Â· Immigration97{% endblock %}
{% block content %}

<style>

/* ============================
   ðŸŽ¨ Immigration97 â€“ Dashboard Wallet UI 2026
   ============================ */

.panel{
  background:
    radial-gradient(circle at top left, rgba(56,189,248,0.18), transparent 55%),
    radial-gradient(circle at bottom right, rgba(34,197,94,0.16), transparent 55%),
    rgba(15,23,42,0.94);
  padding:28px 26px;
  border-radius:24px;
  border:1px solid rgba(148,163,184,0.55);
  box-shadow:
    0 18px 38px rgba(15,23,42,0.88),
    0 0 40px rgba(6,182,212,0.18);
  backdrop-filter: blur(18px);
  animation: fadePanel .45s ease-out;
  margin-bottom: 2.2rem;
  color:#e5e7eb;
}

.panel h2,
.panel h3{
  font-weight:800;
  margin-bottom:1.1rem;
  background: linear-gradient(135deg,#34d399,#06b6d4,#3b82f6);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}


/* Pills */
.pill{
  display:inline-block;
  padding:6px 14px;
  border-radius:18px;
  font-size:.86rem;
  border:1px solid rgba(148,163,184,0.4);
  background:rgba(255,255,255,0.06);
  color:#e5e7eb;
}

.pill.success{
  background:rgba(34,197,94,0.15);
  border-color:rgba(34,197,94,0.55);
  color:#bbf7d0;
}

/* Button */
.btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:11px 22px;
  border-radius:999px;
  font-weight:600;
  transition:all .18s ease-out;
}

.btn-primary{
  background:linear-gradient(135deg,#06b6d4,#3b82f6);
  border:none;
  color:#020617;
  box-shadow:0 10px 26px rgba(37,99,235,.55);
}

.btn-primary:hover{
  transform:translateY(-1px);
  box-shadow:0 14px 36px rgba(37,99,235,.8);
}

/* Tables */
.table{
  width:100%;
  border-collapse:collapse;
  color:#e5e7eb;
  font-size:.9rem;
}

.table thead{
  background:rgba(255,255,255,0.06);
}

.table th, .table td{
  padding:10px 12px;
  border-bottom:1px solid rgba(148,163,184,0.25);
}

.table tbody tr:hover{
  background:rgba(255,255,255,0.04);
}

.muted{
  color:#9ca3af;
  text-align:center;
}

/* Anim */
@keyframes fadePanel{
  from{opacity:0; transform:translateY(10px);}
  to{opacity:1; transform:translateY(0);}
}

</style>

<!-- ======================
     ðŸŸ© PANEL â€“ ACCESS
     ====================== -->
<div class="panel">
  <h2>Mon accÃ¨s</h2>
  {% if has_access %}
    <p class="pill success">âœ… AccÃ¨s actif</p>
  {% else %}
    <p class="pill">AccÃ¨s inactif</p>
    <p><a class="btn btn-primary" href="{% url 'billing:buy' %}">Acheter un code</a></p>
  {% endif %}
</div>

<!-- ======================
     ðŸŸ¦ PANEL â€“ SUBSCRIPTIONS
     ====================== -->
<div class="panel">
  <h3>Mes abonnements</h3>
  <table class="table">
    <thead>
      <tr>
        <th>Plan</th><th>Du</th><th>Au</th><th>Actif</th>
      </tr>
    </thead>
    <tbody>
      {% for s in subscriptions %}
      <tr>
        <td>{{ s.plan.name }}</td>
        <td>{{ s.starts_at|date:"Y-m-d H:i" }}</td>
        <td>{{ s.expires_at|date:"Y-m-d H:i" }}</td>
        <td>{% if s.is_active and s.expires_at > now %}âœ…{% else %}â€”{% endif %}</td>
      </tr>
      {% empty %}
      <tr><td colspan="4" class="muted">Aucun abonnement.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<!-- ======================
     ðŸŸ¨ PANEL â€“ TRANSACTIONS
     ====================== -->
<div class="panel">
  <h3>Mes transactions (20 derniÃ¨res)</h3>
  <table class="table">
    <thead>
      <tr>
        <th>Date</th><th>Type</th><th>Montant</th><th>Devise</th><th>Note</th>
      </tr>
    </thead>
    <tbody>
      {% for t in transactions %}
      <tr>
        <td>{{ t.created_at|date:"Y-m-d H:i" }}</td>
        <td>{{ t.type }}</td>
        <td>{{ t.amount }}</td>
        <td>{{ t.currency }}</td>
        <td>{{ t.description }}</td>
      </tr>
      {% empty %}
      <tr><td colspan="5" class="muted">Aucune transaction.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% endblock %}
