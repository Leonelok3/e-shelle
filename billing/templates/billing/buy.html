{% extends "base.html" %}
{% block title %}Acheter un code · Immigration97{% endblock %}

{% block content %}

<style>
  /* ---- Thème Immigration97 – section achat de code (UI 2026) ---- */

  .billing-buy-wrapper{
    max-width: 960px;
    margin: 0 auto;
    padding: 24px 16px 40px;
    animation: buyFadeIn .45s ease-out;
  }

  .panel{
    background: radial-gradient(circle at top left, rgba(56,189,248,0.18), transparent 55%),
                radial-gradient(circle at bottom right, rgba(34,197,94,0.16), transparent 55%),
                rgba(15,23,42,0.92);
    border-radius: 24px;
    padding: 26px 22px 26px;
    border: 1px solid rgba(148,163,184,0.55);
    box-shadow:
      0 18px 38px rgba(15,23,42,0.85),
      0 0 40px rgba(6,182,212,0.18);
    color: #e5e7eb;
    backdrop-filter: blur(18px);
  }

  .panel h2{
    font-size: 1.8rem;
    margin-bottom: 10px;
    font-weight: 800;
    background: linear-gradient(135deg,#34d399,#06b6d4,#3b82f6);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .panel .muted{
    color: #94a3b8;
    font-size: .96rem;
    margin-bottom: 18px;
  }

  .spec-cards{
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(260px,1fr));
    gap: 18px;
    margin-top: 12px;
  }

  .spec-card{
    background: rgba(15,23,42,0.96);
    border-radius: 18px;
    padding: 18px 16px 18px;
    border: 1px solid rgba(148,163,184,0.4);
    box-shadow: 0 16px 32px rgba(15,23,42,0.9);
    display: flex;
    flex-direction: column;
    gap: 8px;
    position: relative;
    overflow: hidden;
  }

  .spec-card::before{
    content:"";
    position:absolute;
    inset:-1px;
    border-radius:inherit;
    background:radial-gradient(420px 140px at 10% -10%,rgba(56,189,248,0.25),transparent 60%);
    opacity:.8;
    pointer-events:none;
  }

  .spec-title{
    position:relative;
    font-weight: 700;
    font-size: 1.05rem;
    color:#f9fafb;
  }

  .spec-meta{
    position:relative;
    font-size: .9rem;
    color:#cbd5f5;
  }

  .mt-3{
    margin-top: .75rem;
    position:relative;
  }

  .grid-3{
    display:grid;
    grid-template-columns:repeat(3,minmax(0,1fr));
  }

  .btn{
    display:inline-flex;
    align-items:center;
    justify-content:center;
    padding:9px 10px;
    border-radius:999px;
    border:1px solid rgba(148,163,184,0.6);
    background:rgba(15,23,42,0.9);
    color:#e5e7eb;
    font-size:.82rem;
    font-weight:600;
    text-decoration:none;
    cursor:pointer;
    white-space:nowrap;
    transition:
      background 180ms ease-out,
      border-color 160ms ease-out,
      transform 140ms ease-out,
      box-shadow 180ms ease-out,
      color 160ms ease-out;
  }

  .btn:hover{
    border-color:rgba(248,250,252,0.9);
    background:radial-gradient(circle at top left,rgba(56,189,248,0.25),rgba(15,23,42,1));
    color:#f9fafb;
    transform:translateY(-1px);
    box-shadow:0 10px 26px rgba(15,23,42,0.9);
  }

  .btn-primary{
    background:linear-gradient(135deg,#06b6d4,#3b82f6);
    border-color:transparent;
    color:#0b1120;
    box-shadow:0 10px 26px rgba(37,99,235,0.65);
  }

  .btn-primary:hover{
    box-shadow:0 14px 36px rgba(37,99,235,0.85);
  }

  .btn--ghost{
    background:rgba(15,23,42,0.9);
  }

  @keyframes buyFadeIn{
    from{opacity:0; transform:translateY(12px);}
    to{opacity:1; transform:translateY(0);}
  }

  @media (max-width: 640px){
    .grid-3{
      grid-template-columns:1fr;
    }
  }
</style>

<div class="billing-buy-wrapper">
  <div class="panel">
    <h2>Acheter un code d’accès</h2>
    <p class="muted">Choisissez votre pass : <strong>24h</strong> ou <strong>30 jours</strong>.</p>

    <div class="spec-cards">
      {% for p in plans %}
      <article class="spec-card">
        <div class="spec-title">{{ p.name }}</div>
        <div class="spec-meta">{{ p.duration_days }} jour(s) · {{ p.price_usd }} USD</div>
        <form method="post" class="mt-3">
          {% csrf_token %}
          <input type="hidden" name="plan_id" value="{{ p.id }}">
          <input type="hidden" name="next" value="{{ next }}">
          <div class="grid-3" style="gap:.5rem">
            <button name="source" value="chario" class="btn btn-primary">Payer via Chario</button>
            <button name="source" value="paypal" class="btn btn--ghost">PayPal</button>
            <button name="source" value="orange_money" class="btn btn--ghost">Orange Money</button>
          </div>
        </form>
      </article>
      {% empty %}
        <p>⚠️ Aucun plan actif n’est configuré.</p>
      {% endfor %}
    </div>
  </div>
</div>

{% endblock %}
