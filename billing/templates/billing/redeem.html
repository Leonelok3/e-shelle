{% extends 'base.html' %}
{% load static %}

{% block title %}Activation de Licence Premium | Immigration97{% endblock %}

{% block meta_description %}
Activez votre code d'accès Immigration97. Débloquez instantanément vos outils IA d'immigration : CV, tests de langue, simulation visa Canada et Europe.
{% endblock %}

{% block body_class %}billing{% endblock %}
{% block app_scope %}billing redeem-flow{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/billing.css' %}">
{% endblock %}

{% block content %}

<!-- Hero Section -->
<div class="billing-redeem-hero">
  <div class="billing-redeem-hero__icon">
    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="m12 2 10 5-10 5-10-5z"/>
      <path d="m2 17 10 5 10-5"/>
      <path d="m2 12 10 5 10-5"/>
    </svg>
  </div>

  <h1 class="billing-redeem-hero__title">
    Activer votre Pass Premium
  </h1>

  <p class="billing-redeem-hero__subtitle">
    Saisissez le code d'activation reçu par SMS ou Email pour débloquer instantanément l'accès complet aux outils d'immigration IA.
  </p>
</div>

<!-- Messages (Success/Error) -->
{% if messages %}
<div class="billing-redeem-messages">
  {% for message in messages %}
  <div class="billing-redeem-alert billing-redeem-alert--{{ message.tags }}">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
      {% if message.tags == 'success' %}
      <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
      <polyline points="22 4 12 14.01 9 11.01"/>
      {% elif message.tags == 'error' %}
      <circle cx="12" cy="12" r="10"/>
      <line x1="15" y1="9" x2="9" y2="15"/>
      <line x1="9" y1="9" x2="15" y2="15"/>
      {% else %}
      <circle cx="12" cy="12" r="10"/>
      <path d="M12 16v-4M12 8h.01"/>
      {% endif %}
    </svg>
    <span>{{ message }}</span>
  </div>
  {% endfor %}
</div>
{% endif %}

<!-- Redeem Card -->
<div class="billing-redeem-card">
  
  <!-- Card Header -->
  <div class="billing-redeem-card__header">
    <div class="billing-redeem-card__icon">
      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"/>
      </svg>
    </div>
    <div>
      <h2 class="billing-redeem-card__title">Code d'Activation</h2>
      <p class="billing-redeem-card__desc">Entrez votre clé unique ci-dessous</p>
    </div>
  </div>

  <!-- Form -->
  <form method="post" class="billing-redeem-form">
    {% csrf_token %}
    <input type="hidden" name="next" value="{{ next }}">

    <!-- Code Input -->
    <div class="billing-redeem-form__group">
      <label for="id_code" class="billing-redeem-form__label">
        Clé d'activation unique
      </label>
      
      <div class="billing-redeem-form__input-wrapper">
        <svg class="billing-redeem-form__icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
          <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
        </svg>
        <input 
          type="text" 
          id="id_code" 
          name="code" 
          placeholder="I97-XXXX-XXXX" 
          required 
          class="billing-redeem-form__input"
          autofocus
          autocomplete="off"
          spellcheck="false"
        >
      </div>

      <small class="billing-redeem-form__hint">
        Format attendu : <strong>I97-XXXX-XXXX</strong> (lettres et chiffres)
      </small>
    </div>

    <!-- Submit Button -->
    <button type="submit" class="billing-redeem-form__submit">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
        <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4M10 17l5-5-5-5M13.8 12H3"/>
      </svg>
      <span>Débloquer mon accès Premium</span>
    </button>
  </form>

  <!-- Card Footer -->
  <div class="billing-redeem-card__footer">
    <div class="billing-redeem-card__info">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"/>
        <path d="M12 16v-4M12 8h.01"/>
      </svg>
      <div>
        <p><strong>L'activation est instantanée</strong></p>
        <p>Votre espace premium sera accessible dès validation du code.</p>
      </div>
    </div>
  </div>

</div>

<!-- Help Section -->
<div class="billing-redeem-help">
  <h3 class="billing-redeem-help__title">Vous n'avez pas encore de code ?</h3>
  
  <div class="billing-redeem-help__grid">
    
    <div class="billing-redeem-help__card">
      <div class="billing-redeem-help__icon">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="1" y="4" width="22" height="16" rx="2" ry="2"/>
          <line x1="1" y1="10" x2="23" y2="10"/>
        </svg>
      </div>
      <h4>Acheter en Ligne</h4>
      <p>Paiement par carte bancaire ou mobile money. Activation immédiate.</p>
      <a href="{% url 'billing:pricing' %}" class="billing-redeem-help__link">
        <span>Voir les tarifs</span>
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
          <path d="M5 12h14M12 5l7 7-7 7"/>
        </svg>
      </a>
    </div>

    <div class="billing-redeem-help__card">
      <div class="billing-redeem-help__icon">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
          <circle cx="12" cy="10" r="3"/>
        </svg>
      </div>
      <h4>Point de Vente Local</h4>
      <p>Trouvez un revendeur agréé près de chez vous (Cameroun, Côte d'Ivoire, Sénégal).</p>
      <a href="/contact/" class="billing-redeem-help__link">
        <span>Trouver un point</span>
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
          <path d="M5 12h14M12 5l7 7-7 7"/>
        </svg>
      </a>
    </div>

    <div class="billing-redeem-help__card">
      <div class="billing-redeem-help__icon">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
        </svg>
      </div>
      <h4>Besoin d'Aide ?</h4>
      <p>Notre support technique est disponible 24/7 pour vous assister.</p>
      <a href="/contact/" class="billing-redeem-help__link">
        <span>Contacter le support</span>
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
          <path d="M5 12h14M12 5l7 7-7 7"/>
        </svg>
      </a>
    </div>

  </div>
</div>

<!-- Security Info -->
<div class="billing-redeem-security">
  <div class="billing-redeem-security__icon">
    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
      <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
    </svg>
  </div>
  <div>
    <h3 class="billing-redeem-security__title">Sécurité & Confidentialité</h3>
    <p class="billing-redeem-security__desc">
      Chaque code est unique et à usage unique. Vos données sont protégées par cryptage SSL 256 bits.
      Conformité RGPD garantie.
    </p>
  </div>
</div>

{% endblock %}