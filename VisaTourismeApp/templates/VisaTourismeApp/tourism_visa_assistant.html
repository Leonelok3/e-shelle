{% extends "base.html" %}
{% load static %}

{% block title %}
Guide Visa Tourisme â€“ Canada, Schengen & Afrique | Immigration97
{% endblock %}

{% block meta_description %}
Guide Visa Tourisme Immigration97 : simulation intelligente, score de chances,
documents requis, Ã©tapes officielles et conseils anti-refus pour le Canada,
lâ€™espace Schengen et lâ€™Afrique.
{% endblock %}

{% block body_class %}visa-tourisme{% endblock %}
{% block app_scope %}visa-tourisme{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/visa_tourisme.css' %}">
{% endblock %}

{% block content %}

<!-- ================= HERO ================= -->
<section class="vtm-hero vtm-fade-up">
  <span class="vtm-step">Guide Visa Tourisme</span>

  <h1 class="vtm-title">
    PrÃ©parer un <span class="vtm-gradient-primary">Visa Tourisme</span><br>
    Canada, Schengen & Afrique
  </h1>

  <p class="vtm-subtitle">
    Assistant intelligent pour prÃ©parer un <strong>dossier de visa touristique</strong>
    crÃ©dible, structurÃ© et conforme aux attentes des ambassades.
  </p>

  <div class="vtm-info-box mt-md">
    âœ” Check-list personnalisÃ©e des documents<br>
    âœ” Score de chances & analyse de risque<br>
    âœ” Plan exportable en PDF<br>
    âœ” Compatible Canada, Schengen, Afrique
  </div>
</section>

<!-- ================= CONTENU ================= -->
<section class="vtm-card vtm-fade-up">

  <form method="post" class="vtm-form" novalidate>
    {% csrf_token %}

    <div class="vtm-grid">

      {% for field in form %}
        <div class="vtm-field {% if field.field.widget.attrs.class == 'field-full' %}vtm-field--full{% endif %}">
          {{ field.label_tag }}
          {{ field }}

          {% if field.errors %}
            <div class="error-message">
              {{ field.errors.0 }}
            </div>
          {% endif %}
        </div>
      {% endfor %}

    </div>

    <div class="vtm-actions">
      <button type="submit" class="vtm-btn-primary">
        ğŸš€ GÃ©nÃ©rer mon plan de visa
      </button>

      <p class="vtm-microcopy">
        Outil dâ€™aide Ã  la prÃ©paration. Aucune information nâ€™est transmise Ã  une ambassade.
      </p>
    </div>

  </form>

</section>

<!-- ================= RÃ‰SULTAT ================= -->
{% if result %}
<section class="vtm-card vtm-fade-up">

  <h2 class="vtm-title">Analyse du dossier visa</h2>

  <div class="vtm-info-box">
    <strong>Score estimÃ© :</strong> {{ result.score_chances }} %
    â€” {{ result.niveau_risque }}
  </div>

  <div class="vtm-info-box mt-sm">
    <a href="{% url 'visa_tourisme:pdf' result.id %}" target="_blank">
      ğŸ§¾ TÃ©lÃ©charger le plan en PDF
    </a><br>
    <a href="{% url 'visa_tourisme:coach' %}?id={{ result.id }}">
      ğŸ¤ Parler au Coach Visa
    </a>
  </div>

  <h3 class="vtm-subtitle">Points forts</h3>
  <ul>
    {% for pf in result.points_forts_list %}
      <li>{{ pf }}</li>
    {% endfor %}
  </ul>

  <h3 class="vtm-subtitle">Points Ã  renforcer</h3>
  <ul>
    {% for pr in result.points_faibles_list %}
      <li>{{ pr }}</li>
    {% endfor %}
  </ul>

  <h3 class="vtm-subtitle">Documents requis</h3>
  <ul>
    {% for doc in result.documents_list %}
      <li>{{ doc }}</li>
    {% endfor %}
  </ul>

</section>
{% endif %}

{% endblock %}
