{% extends "base.html" %}
{% load static %}

{% block title %}
Historique Visa Tourisme – Simulations & Scores | Immigration97
{% endblock %}

{% block meta_description %}
Historique des simulations Visa Tourisme Immigration97 :
scores de chances, niveaux de risque et destinations
(Canada, Schengen, Afrique).
{% endblock %}

{% block body_class %}visa-tourisme{% endblock %}
{% block app_scope %}visa-tourisme{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/visa_tourisme.css' %}">
{% endblock %}

{% block content %}

<!-- ================= HERO ================= -->
<section class="vtm-hero vtm-fade-up">
  <span class="vtm-step">Historique</span>

  <h1 class="vtm-title">
    Historique des <span class="vtm-gradient-primary">simulations</span>
  </h1>

  <p class="vtm-subtitle">
    Retrouvez toutes les <strong>simulations Visa Tourisme</strong>
    effectuées via Immigration97 :
    destinations, scores de chances et niveaux de risque.
  </p>
</section>

<!-- ================= TABLEAU ================= -->
<section class="vtm-card vtm-fade-up">

  <div class="vtm-info-box mb-md">
    Ce tableau permet de suivre l’évolution des
    <strong>dossiers Visa Tourisme analysés</strong>
    (Canada, Schengen, Afrique).
  </div>

  {% if demandes %}

    <div class="vtm-table">

      <div class="vtm-table-head">
        <span>Date</span>
        <span>Nom</span>
        <span>Destination</span>
        <span>Pays de résidence</span>
        <span>Score</span>
        <span>Risque</span>
      </div>

      {% for d in demandes %}
        <div class="vtm-table-row">
          <span>{{ d.created_at|date:"d/m/Y H:i" }}</span>
          <span>{{ d.full_name|default:"—" }}</span>
          <span>{{ d.get_destination_display }}</span>
          <span>{{ d.pays_residence }}</span>
          <span><strong>{{ d.score_chances }}%</strong></span>
          <span>{{ d.niveau_risque }}</span>
        </div>
      {% endfor %}

    </div>

  {% else %}

    <p class="vtm-subtle">
      Aucune simulation Visa Tourisme enregistrée pour le moment.
    </p>

  {% endif %}

  <div class="vtm-actions">
    <a href="{% url 'visa_tourisme:assistant' %}" class="vtm-btn-secondary">
      ⬅ Retour à l’assistant Visa Tourisme
    </a>
  </div>

</section>

{% endblock %}
