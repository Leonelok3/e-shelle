{% extends "base.html" %}
{% load static %}

{% block title %}
Choisissez votre mod√®le de CV optimis√© | Immigration97
{% endblock %}

{% block meta_description %}
Choisissez un mod√®le de CV optimis√© (Canada, Europe, Moderne, Professionnel)
avant de remplir l‚Äô√©diteur guid√©. Compatible ATS et immigration.
{% endblock %}

{% block body_class %}cv-generator{% endblock %}
{% block app_scope %}cv-generator{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/cv_generator.css' %}">
{% endblock %}

{% block content %}
<main class="cv-page-wrap">

  <!-- HEADER -->
  <header class="cv-page-header">
    <div>
      <div class="cv-page-brand">Immigration97 ¬∑ CV Generator</div>
      <div class="cv-badge-row">
        <span class="cv-badge cv-badge--accent">
          √âtape 1 ‚Äî Choisir un mod√®le
        </span>
        <span class="cv-badge">
          Compatible ATS ¬∑ Canada / Europe / USA
        </span>
      </div>
    </div>

    <a href="{% url 'cv_generator:cv_list' %}" class="cv-pill-link">
      üìÇ Voir mes CV existants
    </a>
  </header>

  <h1 class="cv-title">
    Choisissez le mod√®le de CV qui vous met le mieux en valeur
  </h1>

  <p class="cv-lead">
    S√©lectionnez un design adapt√© √† votre pays cible et √† votre objectif professionnel.
  </p>

  {% if templates %}
    <section class="cv-grid">

      {% for t in templates %}
        {% with st=t.style|lower %}
          <article class="cv-card">

            <div class="cv-thumb">
              {% if t.thumbnail %}
                <img src="{{ t.thumbnail.url }}" alt="Aper√ßu {{ t.name }}">
              {% endif %}
            </div>

            <div class="cv-card-body">
              <h2 class="cv-card-title">{{ t.name }}</h2>

              <span class="cv-card-tag">
                {% if st == "canada" %}Canada / USA (ATS)
                {% elif st == "europe" %}Europe / UE
                {% elif st == "modern" %}Moderne
                {% elif st == "professional" %}Professionnel
                {% else %}Usage universel{% endif %}
              </span>

              <p class="cv-card-desc">
                {{ t.description|default:"Mod√®le de CV optimis√© pour l‚Äôimmigration et l‚Äôemploi." }}
              </p>
            </div>

            <!-- üî• ACTION CLIQUABLE GARANTIE -->
            <div class="cv-card-actions">
              <a href="{% url 'cv_generator:choose_template' t.id %}"
                 class="cv-btn">
                Choisir ce mod√®le
              </a>
            </div>

          </article>
        {% endwith %}
      {% endfor %}

    </section>
  {% else %}
    <div class="cv-empty">
      Aucun mod√®le disponible pour le moment.
    </div>
  {% endif %}

</main>
{% endblock %}
