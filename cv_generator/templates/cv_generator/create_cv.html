{% extends "base.html" %}
{% load static %}

{% block title %}Création de CV | Immigration97{% endblock %}
{% block body_class %}cv-generator{% endblock %}
{% block app_scope %}cv-generator{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/cv_generator.css' %}">
{% endblock %}

{% block content %}
<main class="cv-editor">

  <!-- ================= HEADER ================= -->
  <header class="cv-editor-header">
    <h1>Création de votre CV</h1>

    <div class="cv-steps">
      <span class="{% if current_step == 1 %}active{% endif %}">1. Infos</span>
      <span class="{% if current_step == 2 %}active{% endif %}">2. Expériences</span>
      <span class="{% if current_step == 3 %}active{% endif %}">3. Finalisation</span>
    </div>
  </header>

  <!-- ================= CONTENT ================= -->
  <section class="cv-editor-content">

    {% if current_step == 1 %}
      {% include "cv_generator/steps/step_1_personal.html" %}

    {% elif current_step == 2 %}
      {% include "cv_generator/steps/step_2_experience.html" %}

      {% if experiences|length > 0 %}
        <div class="cv-step-actions" style="margin-top: 2.5rem;">
          <a href="{% url 'cv_generator:create_cv_step3' cv.id %}"
             class="cv-btn-primary">
            ➡️ Passer à l’étape 3 — Finalisation
          </a>
        </div>
      {% endif %}

    {% elif current_step == 3 %}
      {% include "cv_generator/steps/step_3_skills.html" %}

    {% else %}
      <p>Étape inconnue.</p>
    {% endif %}

  </section>
</main>


{% endblock %}
