<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}Assistant Visa Travail{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap 5 via CDN -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
  >
  <!-- Bootstrap Icons (pour de petits icônes premium) -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
  >

  <style>
    :root {
      --bg-main: #020617;
      --bg-card: rgba(15, 23, 42, 0.96);
      --border-soft: rgba(148, 163, 184, 0.25);
      --accent: #22c55e;
      --accent-soft: rgba(34, 197, 94, 0.14);
      --accent-strong: #16a34a;
      --text-main: #f9fafb;
      --text-muted: #9ca3af;
      --blue-soft: #38bdf8;
    }

    /* ===== Layout global ===== */
    html, body {
      height: 100%;
    }

    body {
      background: radial-gradient(circle at top left, #0b1220, #020617 55%, #020617);
      color: var(--text-main);
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
                   "Segoe UI", sans-serif;
      position: relative;
      overflow-x: hidden;
    }

    /* blobs lumineux animés en arrière-plan */
    body::before,
    body::after {
      content: "";
      position: fixed;
      width: 520px;
      height: 520px;
      border-radius: 50%;
      filter: blur(80px);
      opacity: 0.4;
      z-index: -1;
      pointer-events: none;
    }

    body::before {
      background: radial-gradient(circle, #22c55e, transparent 60%);
      top: -160px;
      left: -120px;
      animation: floatBlob 26s ease-in-out infinite alternate;
    }

    body::after {
      background: radial-gradient(circle, #0ea5e9, transparent 60%);
      bottom: -180px;
      right: -120px;
      animation: floatBlobReverse 30s ease-in-out infinite alternate;
    }

    @keyframes floatBlob {
      0% { transform: translate(0, 0) scale(1); opacity: 0.35; }
      50% { transform: translate(60px, 40px) scale(1.1); opacity: 0.55; }
      100% { transform: translate(10px, 80px) scale(1.02); opacity: 0.4; }
    }
    @keyframes floatBlobReverse {
      0% { transform: translate(0, 0) scale(1); opacity: 0.35; }
      50% { transform: translate(-50px, -30px) scale(1.08); opacity: 0.5; }
      100% { transform: translate(-10px, -70px) scale(1.02); opacity: 0.4; }
    }

    /* ===== Navbar glassmorphique ===== */
    .navbar {
      background: radial-gradient(circle at top, rgba(15, 23, 42, 0.95), rgba(2, 6, 23, 0.96));
      border-bottom: 1px solid rgba(148, 163, 184, 0.35);
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
    }

    .navbar-brand {
      font-weight: 700;
      letter-spacing: 0.03em;
      font-size: 0.96rem;
      text-transform: uppercase;
      display: flex;
      align-items: center;
      gap: 0.45rem;
    }

    .navbar-brand span.logo-dot {
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: radial-gradient(circle, var(--accent), #4ade80);
      box-shadow: 0 0 12px rgba(34, 197, 94, 0.9);
      display: inline-block;
    }

    .nav-link {
      font-size: 0.86rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--text-muted) !important;
      padding-inline: 0.9rem !important;
      position: relative;
    }

    .nav-link:hover,
    .nav-link.active {
      color: #e5e7eb !important;
    }

    .nav-link::after {
      content: "";
      position: absolute;
      left: 50%;
      bottom: 0;
      width: 0;
      height: 2px;
      border-radius: 999px;
      background: linear-gradient(90deg, var(--accent), #0ea5e9);
      opacity: 0;
      transform: translateX(-50%);
      transition: width 0.25s ease, opacity 0.25s ease;
    }

    .nav-link:hover::after,
    .nav-link.active::after {
      width: 70%;
      opacity: 1;
    }

    /* ===== Cartes & blocs ===== */
    .card-dark {
      background: var(--bg-card);
      border: 1px solid var(--border-soft);
      border-radius: 1.25rem;
      box-shadow: 0 18px 45px rgba(15, 23, 42, 0.85);
      position: relative;
      overflow: hidden;
    }

    .card-dark::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top left, rgba(148, 163, 184, 0.08), transparent 55%);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.25s ease;
    }

    .card-dark:hover::before {
      opacity: 1;
    }

    .card-dark-hover {
      transition: transform 0.22s ease, box-shadow 0.22s ease, border-color 0.22s ease;
    }

    .card-dark-hover:hover {
      transform: translateY(-4px) translateZ(0);
      box-shadow: 0 22px 60px rgba(15, 23, 42, 0.95);
      border-color: rgba(148, 163, 184, 0.45);
    }

    /* ===== Boutons ===== */
    .btn-primary {
      background: linear-gradient(135deg, var(--accent), var(--accent-strong));
      border: none;
      border-radius: 999px;
      font-weight: 600;
      padding-inline: 1.8rem;
      box-shadow: 0 10px 30px rgba(34, 197, 94, 0.35);
      transition: transform 0.15s ease, box-shadow 0.15s ease, filter 0.15s ease;
    }
    .btn-primary:hover {
      background: linear-gradient(135deg, var(--accent-strong), var(--accent));
      transform: translateY(-1px);
      box-shadow: 0 16px 38px rgba(22, 163, 74, 0.55);
      filter: brightness(1.03);
    }
    .btn-primary:active {
      transform: translateY(0);
      box-shadow: 0 6px 16px rgba(22, 163, 74, 0.55);
    }

    .btn-outline-light {
      border-radius: 999px;
      border-width: 1px;
      border-color: rgba(148, 163, 184, 0.7) !important;
      color: #e5e7eb;
      font-weight: 500;
      padding-inline: 1.4rem;
      background: rgba(15, 23, 42, 0.8);
    }
    .btn-outline-light:hover {
      background: rgba(148, 163, 184, 0.18);
      color: #f9fafb;
    }

    .btn-pill-soft {
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.85);
      border: 1px solid rgba(148, 163, 184, 0.35);
      color: var(--text-muted);
      font-size: 0.8rem;
      padding: 0.35rem 0.9rem;
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
    }

    /* ===== Badges / labels ===== */
    .badge-soft {
      background: var(--accent-soft);
      color: #bbf7d0;
      border-radius: 999px;
      padding: 0.25rem 0.75rem;
      font-size: 0.8rem;
      border: 1px solid rgba(34, 197, 94, 0.45);
    }

    /* ===== Liens ===== */
    a {
      color: var(--blue-soft);
      text-decoration: none;
      transition: color 0.15s ease, opacity 0.15s ease;
    }
    a:hover {
      color: #7dd3fc;
      text-decoration: underline;
    }

    /* ===== Formulaires ===== */
    .form-control,
    .form-select,
    .form-check-input {
      background-color: rgba(15, 23, 42, 0.95);
      border-color: rgba(55, 65, 81, 0.9);
      color: var(--text-main);
      border-radius: 0.75rem;
      font-size: 0.9rem;
    }
    .form-control:focus,
    .form-select:focus {
      background-color: rgba(15, 23, 42, 0.98);
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(34, 197, 94, 0.35);
      color: var(--text-main);
    }
    .form-label {
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--text-muted);
      margin-bottom: 0.25rem;
    }
    .form-text {
      font-size: 0.78rem;
      color: var(--text-muted);
    }

    .form-check-input:checked {
      background-color: var(--accent);
      border-color: var(--accent);
    }

    /* ===== Animation d’entrée des pages ===== */
    .page-enter {
      animation: pageFadeUp 0.5s cubic-bezier(.16,.84,.44,1) 0.02s both;
    }

    @keyframes pageFadeUp {
      from {
        opacity: 0;
        transform: translateY(12px);
        filter: blur(2px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
        filter: blur(0);
      }
    }

    /* ===== Footer ===== */
    footer {
      color: var(--text-muted);
      font-size: 0.78rem;
    }

    /* Petite adaptation mobile */
    @media (max-width: 576px) {
      .navbar-brand {
        font-size: 0.8rem;
      }
      .btn-primary {
        padding-inline: 1.3rem;
      }
    }
  </style>

  {% block extra_head %}{% endblock %}
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark">
  <div class="container py-2">
    <a class="navbar-brand" href="{% url 'visa_travail:home' %}">
      <span class="logo-dot"></span>
      <span>Immigration97 · Assistant Visa Travail</span>
    </a>

    <button
      class="navbar-toggler border-0"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#mainNavbar"
      aria-controls="mainNavbar"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse justify-content-end" id="mainNavbar">
      <ul class="navbar-nav me-3 align-items-lg-center">
        <li class="nav-item">
          <a class="nav-link {% if request.resolver_match.url_name == 'home' %}active{% endif %}"
             href="{% url 'visa_travail:home' %}">
            <span class="d-inline-flex align-items-center gap-1">
              <i class="bi bi-compass"></i> Assistant
            </span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link {% if request.resolver_match.url_name == 'job_offers_list' %}active{% endif %}"
             href="{% url 'visa_travail:job_offers_list' %}">
            <span class="d-inline-flex align-items-center gap-1">
              <i class="bi bi-briefcase"></i> Offres d'emploi
            </span>
          </a>
        </li>
        <li class="nav-item d-none d-lg-block">
          <a class="nav-link {% if request.resolver_match.url_name == 'ressources' %}active{% endif %}"
             href="{% url 'visa_travail:ressources' %}">
            <span class="d-inline-flex align-items-center gap-1">
              <i class="bi bi-shield-check"></i> Ressources
            </span>
          </a>
        </li>
      </ul>

      <div class="d-flex gap-2">
        <a href="{% url 'visa_travail:profil' %}" class="btn btn-primary btn-sm">
          <i class="bi bi-stars me-1"></i> Commencer le diagnostic
        </a>
      </div>
    </div>
  </div>
</nav>

<main class="container my-4 my-md-5 page-enter">
  {% block content %}{% endblock %}
</main>

<footer class="container pb-4 small">
  <div class="d-flex justify-content-between flex-column flex-md-row gap-2">
    <span>© {% now "Y" %} Immigration97 · E-Shelle. Tous droits réservés.</span>
    <span>Assistant pédagogique : toujours vérifier les conditions sur les sites officiels des gouvernements.</span>
  </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
{% block extra_js %}{% endblock %}
</body>
</html>
