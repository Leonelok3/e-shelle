{% extends 'base.html' %}

{% block title %}Connexion | E-SHELLE{% endblock %}
{% block meta_description %}Connectez-vous pour accÃ©der Ã  vos services (CV IA, Visa Photo, etc.).{% endblock %}

{% block content %}
<div class="min-h-screen flex items-center justify-center bg-slate-950 bg-gradient-to-br from-slate-950 via-slate-950 to-slate-900 px-4 py-12">
  <div class="w-full max-w-2xl bg-slate-900/90 backdrop-blur-xl rounded-3xl shadow-2xl shadow-emerald-900/40 border border-emerald-500/30 px-6 py-8 sm:px-10 sm:py-10">

    <!-- Header -->
    <div class="text-center mb-8">
      <p class="text-xs font-semibold tracking-[0.2em] uppercase text-emerald-300/80 mb-2">
        E-SHELLE â€¢ PORTAIL SECURISÃ‰
      </p>
      <h1 class="text-3xl sm:text-4xl font-extrabold bg-gradient-to-r from-emerald-400 via-cyan-300 to-sky-400 bg-clip-text text-transparent">
        ğŸ” Connexion sÃ©curisÃ©e
      </h1>
      <p class="text-sm sm:text-base font-medium text-slate-300 mt-3">
        ğŸŒŸ AccÃ©dez Ã  vos <span class="text-emerald-300">modules IA</span> et <span class="text-cyan-300">Visa Photo</span> en toute confiance.
      </p>
    </div>

    <!-- Messages -->
    {% if messages %}
      <div class="mb-6 space-y-2">
        {% for message in messages %}
          <div class="text-sm px-4 py-3 rounded-xl border shadow-sm
                      {% if message.tags == 'success' %}
                        bg-emerald-900/40 border-emerald-500/50 text-emerald-100
                      {% elif message.tags == 'warning' %}
                        bg-amber-900/40 border-amber-500/50 text-amber-100
                      {% elif message.tags == 'error' %}
                        bg-rose-900/40 border-rose-500/50 text-rose-100
                      {% else %}
                        bg-sky-900/40 border-sky-500/50 text-sky-100
                      {% endif %}">
            {{ message }}
          </div>
        {% endfor %}
      </div>
    {% endif %}

    <!-- Form -->
    <form method="post" action="{% url 'authentification:login' %}" class="space-y-6">
      {% csrf_token %}
      {% if request.GET.next %}
        <input type="hidden" name="next" value="{{ request.GET.next }}">
      {% elif next %}
        <input type="hidden" name="next" value="{{ next }}">
      {% endif %}

      <div class="space-y-2">
        <label for="username" class="block text-sm font-medium text-slate-100">
          ğŸ‘¤ Nom d'utilisateur
        </label>
        <input type="text" name="username" id="username" value="{{ username|default:'' }}"
               placeholder="Votre nom d'utilisateur"
               required
               class="mt-1 block w-full rounded-xl border border-slate-700 bg-slate-950/60 px-4 py-3 text-slate-50 placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:border-emerald-400 transition-shadow">
      </div>

      <div class="space-y-2">
        <label for="password" class="block text-sm font-medium text-slate-100">
          ğŸ”’ Mot de passe
        </label>
        <input type="password" name="password" id="password"
               placeholder="Votre mot de passe"
               required
               class="mt-1 block w-full rounded-xl border border-slate-700 bg-slate-950/60 px-4 py-3 text-slate-50 placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:border-emerald-400 transition-shadow">
      </div>

      <button type="submit"
              class="w-full inline-flex justify-center items-center px-6 py-3 rounded-xl bg-gradient-to-r from-emerald-500 via-emerald-400 to-cyan-400 text-slate-950 font-bold tracking-wide shadow-lg shadow-emerald-700/40 hover:shadow-emerald-500/50 hover:from-emerald-400 hover:via-emerald-300 hover:to-cyan-300 transition transform hover:-translate-y-[1px]">
        âœ… Se connecter
      </button>
    </form>

    <!-- Footer -->
    <div class="mt-6 flex flex-col sm:flex-row items-center justify-between text-xs sm:text-sm text-slate-300 gap-3">
      <a href="{% url 'authentification:password_reset' %}"
         class="font-semibold text-emerald-300 hover:text-emerald-200 transition-colors">
        Mot de passe oubliÃ© ?
      </a>
      <a href="{% url 'authentification:register' %}"
         class="font-semibold text-cyan-300 hover:text-cyan-200 transition-colors">
        CrÃ©er un compte
      </a>
    </div>

    {% if user.is_authenticated %}
      <form method="post" action="{% url 'authentification:logout' %}" class="mt-4 text-center">
        {% csrf_token %}
        <button type="submit"
                class="text-xs sm:text-sm font-semibold text-slate-300 hover:text-rose-300 transition-colors">
          ğŸ”“ Se dÃ©connecter
        </button>
      </form>
    {% endif %}

    <!-- Resend Activation -->
    <div class="mt-8 border-t border-slate-800 pt-4">
      <p class="text-xs sm:text-sm text-slate-300 text-center mb-3">
        Vous n'avez pas reÃ§u l'email de confirmation ?
      </p>
      <form method="post" action="{% url 'authentification:resend_activation' %}"
            class="flex flex-col sm:flex-row gap-3 justify-center">
        {% csrf_token %}
        <input type="email"
               name="email"
               placeholder="Votre adresse email"
               required
               class="flex-1 rounded-xl border border-slate-700 bg-slate-950/60 px-4 py-3 text-slate-50 placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:border-emerald-400 transition-shadow">
        <button type="submit"
                class="px-4 py-3 rounded-xl bg-gradient-to-r from-sky-500 via-sky-400 to-emerald-400 text-slate-950 text-xs sm:text-sm font-bold shadow-md shadow-sky-700/40 hover:shadow-sky-500/50 transition transform hover:-translate-y-[1px]">
          ğŸ” Renvoyer
        </button>
      </form>
    </div>
  </div>
</div>
{% endblock %}
