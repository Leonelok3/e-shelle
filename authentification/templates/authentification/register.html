{% extends "base.html" %}
{% load static %}

{% block title %}CrÃ©er un compte â€“ Immigration97{% endblock %}

{% block head_extra %}
<link rel="stylesheet" href="{% static 'css/pages/authentication.css' %}">
{% endblock %}

{% block content %}
<main class="auth-layout">

  <section class="auth-container">
    <div class="auth-card">

      <header class="auth-header">
        <img src="{% static 'img/LOGOIMM97.png' %}" alt="Immigration97" class="auth-logo">
        <h1>CrÃ©er un compte</h1>
        <p>Rejoignez la plateforme Immigration97</p>
      </header>

      {% if messages %}
        <div class="auth-alerts">
          {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">
              {{ message }}
            </div>
          {% endfor %}
        </div>
      {% endif %}

      <form method="post" class="auth-form" novalidate>
        {% csrf_token %}

        <div class="form-group">
          <label for="username">Nom dâ€™utilisateur</label>
          <input
            type="text"
            id="username"
            name="username"
            value="{{ prefill.username|default:'' }}"
            required
            autocomplete="username"
          >
        </div>

        <div class="form-group">
          <label for="email">Adresse email</label>
          <input
            type="email"
            id="email"
            name="email"
            value="{{ prefill.email|default:'' }}"
            required
            autocomplete="email"
          >
        </div>

        <div class="form-group password-wrapper">
          <label for="password1">Mot de passe</label>
          <input
            id="password1"
            type="password"
            name="password"
            required
            autocomplete="new-password"
            class="password-input"
          >
          <button
            type="button"
            class="password-toggle"
            aria-label="Afficher le mot de passe"
            tabindex="-1">
            ğŸ‘
          </button>
        </div>

        <div class="form-group password-wrapper">
          <label for="password2">Confirmer le mot de passe</label>
          <input
            id="password2"
            type="password"
            name="confirm_password"
            required
            autocomplete="new-password"
            class="password-input"
          >
          <button
            type="button"
            class="password-toggle"
            aria-label="Afficher le mot de passe"
            tabindex="-1">
            ğŸ‘
          </button>
        </div>

        <button type="submit" class="btn-auth-primary">
          CrÃ©er mon compte
        </button>
      </form>
      <div class="register-info">
  <p class="info-text">
    ğŸ“§ Un email de confirmation vous sera envoyÃ© aprÃ¨s lâ€™inscription.
  </p>

  <details class="resend-box">
    <summary>Vous nâ€™avez pas reÃ§u lâ€™email ?</summary>

    <form method="post" action="{% url 'authentification:resend_activation_email' %}">
      {% csrf_token %}
      <input
        type="email"
        name="email"
        placeholder="Votre adresse email"
        required
      >
      <button type="submit">
        Renvoyer lâ€™email de confirmation
      </button>
    </form>
  </details>
</div>


      <footer class="auth-footer">
        <p>
          DÃ©jÃ  inscrit ?
          <a href="{% url 'authentification:login' %}">Se connecter</a>
        </p>
        <p style="margin-top: 0.5rem;">
  Vous nâ€™avez pas reÃ§u lâ€™email de confirmation ?
  <a href="{% url 'authentification:resend_activation' %}">
    Renvoyer lâ€™email
  </a>
</p>

      </footer>

    </div>
  </section>

</main>

{% endblock %}

{% block scripts_extra %}
<script src="{% static 'js/pages/authentication.js' %}"></script>
{% endblock %}
