<!DOCTYPE html>
<html lang="fr">
<head>
  {% load static %}

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  {# ---- SEO de base ---- #}
  <title>{% block title %}CV Builder · Immigration97{% endblock %}</title>
  <meta name="description" content="{% block meta_description %}Générez votre CV optimisé par IA, conforme aux standards RH locaux (Canada, Europe, USA).{% endblock %}">
  <link rel="canonical" href="{{ request.build_absolute_uri }}">
  <meta name="robots" content="index, follow">
  <meta name="csrf-token" content="{{ csrf_token }}">
  <meta name="theme-color" content="#0ea5e9">

  {# ---- Favicon / PWA minimal ---- #}
  <link rel="icon" href="{% static 'img/logo.svg' %}" type="image/svg+xml">
  <link rel="apple-touch-icon" href="{% static 'img/logo.svg' %}">
  <meta name="application-name" content="Immigration97">

  {# ---- Open Graph / Twitter ---- #}
  <meta property="og:title" content="Immigration97 — CV Builder, Photos DV-Lottery, Guides & Paiements">
  <meta property="og:description" content="Générez votre CV optimisé par IA, photos DV-Lottery conformes, guides visa & paiements au clic. Rapide et pro.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="{{ request.build_absolute_uri }}">
  <meta property="og:image" content="{% static 'img/logo.svg' %}">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Immigration97 — CV Builder">
  <meta name="twitter:description" content="CV optimisés par IA + photos DV-Lottery + guides visa.">

  {# ---- Perf: préconnexion CDN ---- #}
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">

  {# ---- CSS : Tailwind puis tes feuilles locales ---- #}
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="preload" href="{% static 'css/tokens.css' %}" as="style">
  <link rel="preload" href="{% static 'css/main.css' %}" as="style">
  <link rel="stylesheet" href="{% static 'css/tokens.css' %}">
  <link rel="stylesheet" href="{% static 'css/main.css' %}">
  <link rel="stylesheet" href="{% static 'css/styles.css' %}">

  {# ---- Accessibilité ---- #}
  <style>
    .skip-link{position:absolute;left:-999px;top:auto;width:1px;height:1px;overflow:hidden}
    .skip-link:focus{left:1rem;top:1rem;width:auto;height:auto;background:#003366;color:#fff;padding:.5rem .75rem;z-index:9999;border-radius:4px}
  </style>

  {% block head_extra %}{% endblock %}
</head>
<body class="app">
  <a class="skip-link" href="#main-content">Aller au contenu</a>

  <header class="topbar" role="banner">
    <div class="container row" style="display:flex;align-items:center;justify-content:space-between;gap:1rem;">
      {# --- BRAND avec LOGO GLOBAL --- #}
      <a href="{% url 'cv_generator:index' %}" class="brand" style="display:flex;align-items:center;gap:.6rem;text-decoration:none;">
        <img src="{% static 'img/logo.svg' %}" alt="Immigration97" height="40" width="40" loading="eager">
        <span class="font-semibold">Immigration97</span>
      </a>

      <nav class="nav" role="navigation" aria-label="Menu principal" style="display:flex;gap:.5rem;align-items:center;">
        <a class="chip" href="{% url 'cv_generator:cv_list' %}">Mon CV</a>
        <a class="chip active" href="{% url 'photos:index' %}">Visa Photo</a>
      </nav>
    </div>
  </header>

  <main id="main-content" class="container page" role="main">
    {% block content %}{% endblock %}
  </main>

  <footer class="footer" role="contentinfo">
    <div class="container">
      <div class="foot-grid">
        <div>
          <div class="brand" style="display:flex;align-items:center;gap:.6rem;">
            <img src="{% static 'img/logo.svg' %}" alt="Immigration97" height="28" width="28" loading="lazy">
            <span>Immigration97</span>
          </div>
          <p class="muted">Outil rapide pour générer des photos conformes aux demandes de visa.</p>
        </div>
        <div>
          <div class="foot-title">Confiance</div>
          <ul class="foot-list">
            <li>Vie privée : jamais de revente d’images</li>
            <li>Suppression automatique possible (24&nbsp;h)</li>
            <li>Contrôles techniques à chaque étape</li>
          </ul>
        </div>
        <div>
          <div class="foot-title">Aide</div>
          <ul class="foot-list">
            <li>FAQ en bas de page</li>
            <li>Support sous 24&nbsp;h ouvrées</li>
          </ul>
        </div>
        <div>
          <div class="foot-title">Autre Module</div>
          <ul class="foot-list">
            <li><a href="{% url 'cv_generator:index' %}">Générateur de CV</a></li>
            <li><a href="{% url 'photos:index' %}">Visa Photo</a></li>
          </ul>
        </div>
      </div>
      <div class="foot-bottom muted">© {% now "Y" %} Immigration97 — Tous droits réservés.</div>
    </div>
  </footer>

  <noscript>
    <div style="padding:1rem;background:#fff3cd;color:#856404;text-align:center;">
      JavaScript est nécessaire pour une expérience complète sur ce site. Activez JavaScript pour utiliser tous les outils.
    </div>
  </noscript>

  {# ---- JS (defer) ---- #}
  <script src="{% static 'js/csrf.js' %}" defer></script>
  <script src="{% static 'js/fetch_helpers.js' %}" defer></script>
  <script src="{% static 'js/i18n.js' %}" defer></script>
  <script src="{% static 'js/main.js' %}" defer></script>
  <script src="https://kit.fontawesome.com/9d6b1b0b3f.js" crossorigin="anonymous" defer></script>

  {% block body_end %}{% endblock %}
</body>
</html>
