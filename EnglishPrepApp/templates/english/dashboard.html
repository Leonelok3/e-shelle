{% extends "base.html" %}
{% load static %}

{% block title %}
Tableau de bord anglais ‚Äì Immigration97
{% endblock %}

{% block meta %}
<meta name="description"
      content="Tableau de bord de pr√©paration aux tests d‚Äôanglais sur Immigration97 : IELTS, TOEFL, TOEIC, suivi de score, XP et progression personnalis√©e.">
{% endblock %}

{% block content %}
<main class="page-englishprep">

  <!-- HERO -->
  <section class="eng-hero container">
    <p class="eng-hero-kicker">
      Immigration97 ‚Ä¢ Pr√©paration anglais
    </p>

    <h1 class="eng-hero-title">
      Pr√©pare ton <span>test d‚Äôanglais</span><br>
      intelligemment
    </h1>

    <p class="eng-hero-subtitle">
      Entra√Æne-toi avec des tests r√©alistes (IELTS, TOEFL, TOEIC),
      suis ton score, gagne de l‚ÄôXP et am√©liore tes comp√©tences
      avec des corrections d√©taill√©es et un coach intelligent.
    </p>

    <div class="eng-links">
      <a href="{% url 'englishprep:exam_list' %}" class="btn-primary">
        üöÄ Commencer un test
      </a>
      <a href="{% url 'englishprep:test_history' %}" class="btn-outline">
        üìä Voir mes r√©sultats
      </a>
      <a href="{% url 'englishprep:ai_coach' %}" class="eng-link">
        ü§ñ Coach IA
      </a>
    </div>
  </section>

  <!-- SECTION EXAMENS -->
  <section class="eng-section">
    <div class="container">
      <h2 class="eng-section-title">
        Examens disponibles
      </h2>
      <p class="eng-section-desc">
        Choisis un examen officiel et entra√Æne-toi dans des conditions
        proches du r√©el.
      </p>

      {% if tests %}
        <div class="exam-grid">
          {% for test in tests %}
            <article class="exam-card">

              <div class="exam-tags">
                <span class="exam-tag">
                  {{ test.get_exam_type_display }}
                </span>
                <span class="exam-tag">
                  Niveau {{ test.level }}
                </span>
              </div>

              <h3 class="exam-title">
                {{ test.name }}
              </h3>

              <p class="exam-description">
                {{ test.description|default:"Entra√Ænement cibl√© avec score et correction d√©taill√©e." }}
              </p>

              <p class="exam-meta">
                ‚è± {{ test.duration_minutes }} minutes
              </p>

              <div class="eng-links">
                <a href="{% url 'englishprep:take_test' test.id %}"
                   class="btn-primary">
                  Commencer
                </a>

                <a href="{% url 'englishprep:exam_learning_path' test.id %}"
                   class="btn-outline">
                  Cours & exercices
                </a>
              </div>

            </article>
          {% endfor %}
        </div>
      {% else %}
        <p class="empty-state">
          Aucun test disponible pour le moment.
        </p>
      {% endif %}
    </div>
  </section>

  <!-- SECTION PROFIL -->
  {% if profile %}
  <section class="eng-section">
    <div class="container">
      <h2 class="eng-section-title">
        Ton profil anglais
      </h2>
      <p class="eng-section-desc">
        Ton niveau √©volue automatiquement apr√®s chaque test.
      </p>

      <div class="profile-box">
        <div class="profile-stat">
          <span>XP total</span>
          <strong>{{ profile.xp }}</strong>
        </div>

        <div class="profile-stat">
          <span>Niveau</span>
          <strong>Lvl {{ profile.level }}</strong>
        </div>

        <div class="profile-stat">
          <span>Tests pass√©s</span>
          <strong>{{ profile.total_tests }}</strong>
        </div>

        <div class="profile-stat">
          <span>Meilleur score</span>
          <strong>{{ profile.best_score }}%</strong>
        </div>

        {% if profile.badges %}
          <div class="eng-links">
            {% for badge in profile.badges %}
              <span class="badge">üèÖ {{ badge }}</span>
            {% endfor %}
          </div>
        {% endif %}
      </div>
    </div>
  </section>
  {% endif %}

  <!-- FOOTER INFO -->
  <div class="eng-footer-info container">
    Pr√©paration IELTS ‚Ä¢ TOEFL ‚Ä¢ TOEIC ‚Ä¢ Immigration & √©tudes internationales
  </div>

</main>
{% endblock %}
