{% extends "base.html" %}
{% load static %}

{% block title %}
Pr√©paration {{ exam_code|upper }} ‚Äì {{ section|upper }} | Immigration97
{% endblock %}

{% block content %}
<section class="page page-language">

  <!-- ========================= -->
  <!-- üß† TITRE & CONTEXTE -->
  <!-- ========================= -->
  <header class="page-title">
    <h1>
      {{ exam_code|upper }} ‚Äì
      {% if section == "co" %}
        Compr√©hension orale
      {% elif section == "ce" %}
        Compr√©hension √©crite
      {% elif section == "ee" %}
        Expression √©crite
      {% elif section == "eo" %}
        Expression orale
      {% endif %}
    </h1>
    {% include "preparation_tests/partials/_cefr_bar.html" %}


    <p class="page-subtitle">
      Le√ßons officielles + exercices corrig√©s
    </p>
  </header>

  <!-- ========================= -->
  <!-- üß≠ SOUS-MENU DE NAVIGATION -->
  <!-- ========================= -->
  {% include "preparation_tests/partials/_prep_nav.html" %}

  <!-- ========================= -->
  <!-- üìò LISTE DES LE√áONS -->
  <!-- ========================= -->
  <h2>üìò Le√ßons disponibles</h2>

  <div class="lesson-grid">
    {% for lesson in accessible_lessons %}
      <div class="lesson-card unlocked">

        <div class="lesson-level">
          Niveau {{ lesson.level }}
        </div>

        <h3>{{ lesson.title }}</h3>

        <a
          href="{% url 'preparation_tests:lesson_session' exam_code section lesson.id %}"
          class="btn btn--primary"
        >
          ‚ñ∂ Commencer la le√ßon
        </a>

      </div>
    {% empty %}
      <p>Aucune le√ßon disponible pour le moment.</p>
    {% endfor %}
  </div>

  <!-- ========================= -->
  <!-- üîô RETOUR HUB -->
  <!-- ========================= -->
  <div class="centered-block">
    <a href="{% url 'preparation_tests:tef_hub' %}" class="btn btn--ghost">
      ‚Üê Retour au hub TEF
    </a>
  </div>

</section>
{% endblock %}
