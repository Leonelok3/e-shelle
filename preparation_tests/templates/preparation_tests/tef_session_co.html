{% extends "base.html" %}
{% load static %}

{% block title %}
Examen blanc TEF ‚Äì Compr√©hension orale
{% endblock %}

{% block head_extra %}
<link rel="stylesheet" href="{% static 'css/pages/tef_co_session.css' %}">
<script src="{% static 'js/exam_session_engine.js' %}" defer></script>
{% endblock %}

{% block content %}
<main class="container-narrow exam-session">

  <!-- ===== HEADER EXAMEN ===== -->
  <header class="exam-header">
    <h1>‚è±Ô∏è Examen blanc TEF ‚Äì Compr√©hension orale</h1>

    <div class="exam-meta">
      <span class="exam-timer">
        Temps restant : <strong id="exam-timer">40:00</strong>
      </span>
    </div>
  </header>

  <!-- ===== QUESTIONS ===== -->
  {% for question in questions %}
  <section class="exam-question" data-question data-correct="{{ question.correct_option }}">
    
    <h2 class="question-title">
      Question {{ forloop.counter }}
    </h2>

    {% if question.audio %}
    <audio controls class="question-audio">
      <source src="{{ question.audio.url }}" type="audio/mpeg">
    </audio>
    {% endif %}

    <p class="question-text">{{ question.question_text }}</p>

    <form class="question-form">
      {% if question.option_a %}
      <label><input type="radio" name="q{{ question.id }}" value="A"> A. {{ question.option_a }}</label>
      {% endif %}
      {% if question.option_b %}
      <label><input type="radio" name="q{{ question.id }}" value="B"> B. {{ question.option_b }}</label>
      {% endif %}
      {% if question.option_c %}
      <label><input type="radio" name="q{{ question.id }}" value="C"> C. {{ question.option_c }}</label>
      {% endif %}
      {% if question.option_d %}
      <label><input type="radio" name="q{{ question.id }}" value="D"> D. {{ question.option_d }}</label>
      {% endif %}
    </form>

  </section>
  {% endfor %}

  <!-- ===== ACTIONS ===== -->
  <footer class="exam-actions">
    <button id="finish-exam" class="btn btn-danger">
      Terminer l‚Äôexamen
    </button>

    <a href="{% url 'preparation_tests:dashboard_tef' %}" class="btn btn-soft">
      üìä Voir mon niveau TEF
    </a>

    <a href="{% url 'preparation_tests:tef_co' %}" class="btn btn-soft">
      ‚Üê Retour aux cours & exercices
    </a>
  </footer>

</main>
{% endblock %}
