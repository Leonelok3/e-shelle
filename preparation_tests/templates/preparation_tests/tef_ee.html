{% extends "base.html" %}
{% load static %}

{% block title %}
TEF â€” Expression Ã‰crite (EE) | Immigration97
{% endblock %}

{% block meta_description %}
Cours et atelier guidÃ© TEF Expression Ã‰crite : structure, modÃ¨les,
analyse automatique et export PDF.
{% endblock %}

{% block head_extra %}
<link rel="stylesheet" href="{% static 'css/pages/tef_ee.css' %}">
{% endblock %}

{% block content %}

<section class="page page-tef-ee">

  <!-- ===== HERO ===== -->
  <section class="hero">
    <article class="hero-card">
      <div class="hero-top">
        <div>
          <div class="hero-badge">TEF â€¢ EXPRESSION Ã‰CRITE</div>
          <h1 class="hero-title">
            Cours â€” <span class="accent">Expression Ã‰crite (EE)</span>
          </h1>
          <p class="small">
            Atelier complet pour rÃ©ussir lâ€™EE du TEF :
            structure, connecteurs, longueur optimale et relecture stratÃ©gique.
          </p>
        </div>

        <div class="hero-actions">
          <a class="btn btn-primary"
             href="{% url 'preparation_tests:start_session' 'tef' %}?section=ee">
            âœï¸ DÃ©marrer une session EE
          </a>
          <a class="btn btn-soft"
             href="{% url 'preparation_tests:exam_detail' 'tef' %}#writing">
            ğŸ“„ Format officiel TEF
          </a>
        </div>
      </div>

      <div class="hero-grid">
        <div class="hero-col">
          <h3>Objectifs clÃ©s</h3>
          <ul>
            <li>Respecter la consigne et le destinataire</li>
            <li>Structure claire (intro â†’ 2 idÃ©es â†’ conclusion)</li>
            <li>Connecteurs variÃ©s</li>
            <li>120â€“180 mots</li>
          </ul>
        </div>
        <div class="hero-col">
          <h3>MÃ©thode</h3>
          <ul>
            <li><strong>Avant</strong> : analyser la consigne</li>
            <li><strong>Pendant</strong> : dÃ©velopper 2 idÃ©es</li>
            <li><strong>AprÃ¨s</strong> : corriger accords et cohÃ©rence</li>
          </ul>
        </div>
        <div class="hero-col">
          <h3>PiÃ¨ges frÃ©quents</h3>
          <ul>
            <li>Hors sujet</li>
            <li>Texte trop court</li>
            <li>Ton inadaptÃ©</li>
            <li>Manque de connecteurs</li>
          </ul>
        </div>
      </div>
    </article>
  </section>

  <!-- ===== LEÃ‡ONS ===== -->
  {% if lessons %}
  <section class="lessons-section">
    <h2 class="section-title">ğŸ“– LeÃ§ons â€” Expression Ã‰crite</h2>

    <div class="grid">
      {% for l in lessons %}
      <article class="lesson-card">
        <h3>{{ l.title }}</h3>
        <div class="lesson-meta">
          Mise Ã  jour : {{ l.updated_at|date:"d/m/Y" }}
        </div>

        <div class="text-body">
          {{ l.content_html|safe }}
        </div>

        <div class="lesson-actions">
          <a href="{% url 'preparation_tests:lesson_session_ee' l.id %}"
             class="btn btn-primary">
            ğŸš€ Exercices EE
          </a>
        </div>
      </article>
      {% endfor %}
    </div>
  </section>
  {% endif %}

  <!-- ===== ATELIER EE ===== -->
  <section class="workshop-section">
    <h2>ğŸ›  Atelier guidÃ© â€” Expression Ã‰crite</h2>
    <p class="small">
      PrÃ©pare ton plan, rÃ©dige ton texte, puis lance lâ€™analyse automatique
      (longueur, connecteurs, richesse lexicale).
    </p>

    <div class="workshop-grid">

      <!-- PLAN -->
      <article class="card">
        <h3>ğŸ§  Plan & paramÃ¨tres</h3>

        <input id="topic" class="input" placeholder="Sujet / consigne">
        <select id="type" class="select">
          <option value="email">Email</option>
          <option value="avis">Avis</option>
          <option value="note">Note</option>
        </select>

        <select id="tone" class="select">
          <option value="formel">Formel</option>
          <option value="neutre">Neutre</option>
          <option value="amical">Amical</option>
        </select>

        <textarea id="plan" class="textarea"
          placeholder="Intro / IdÃ©e 1 / IdÃ©e 2 / Conclusion"></textarea>
      </article>

      <!-- RÃ‰DACTION -->
      <article class="card">
        <h3>âœï¸ RÃ©daction</h3>

        <textarea id="text" class="textarea"
          placeholder="RÃ©dige ton texte iciâ€¦"></textarea>

        <div class="metrics">
          <span id="wcBadge">Mots : 0</span>
          <span id="lenBadge">CaractÃ¨res : 0</span>
        </div>

        <div class="actions">
          <button id="btnAnalyze" class="btn btn-primary">ğŸ” Analyser</button>
          <button id="btnClear" class="btn btn-soft">ğŸ—‘ Effacer</button>
          <button id="btnPdf" class="btn btn-soft">ğŸ§¾ Export PDF</button>
        </div>

        <div id="ee_tips" class="analysis-output"></div>
      </article>

    </div>
  </section>

</section>

{% endblock %}

{% block scripts_extra %}
<script src="{% static 'js/tef_ee_workshop.js' %}"></script>
{% endblock %}
