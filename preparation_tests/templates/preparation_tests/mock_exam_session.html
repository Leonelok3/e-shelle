{% extends "base.html" %}
{% load static %}

{% block title %}
Examen blanc â€“ {{ session.exam.name }}
{% endblock %}

{% block content %}
<section class="page container-narrow">

  <header class="page-header">
    <h1>
      ðŸ§ª Examen blanc â€“ {{ session.exam.name }}
      {% if session.section %}
        ({{ session.section.code|upper }})
      {% endif %}
    </h1>
    {% include "preparation_tests/partials/_cefr_bar.html" %}


    <p class="lead">
      RÃ©ponds aux questions comme Ã  lâ€™examen officiel.
      Le chrono est lancÃ©.
    </p>
  </header>

  <hr>

  <!-- INFOS SESSION -->
  <div class="card">
    <p><strong>Mode :</strong> Examen blanc</p>
    <p><strong>Section :</strong>
      {% if session.section %}
        {{ session.section.code|upper }}
      {% else %}
        Toutes sections
      {% endif %}
    </p>
    <p><strong>Nombre de questions :</strong> {{ questions|length }}</p>
    <p><strong>DurÃ©e :</strong> {{ duration|default:"â€”" }} secondes</p>
  </div>

  <hr>

  <!-- QUESTIONS -->
  {% if questions %}
    <form method="post">
      {% csrf_token %}

      {% for question in questions %}
        <div class="card mb-3">
          <h3>Question {{ forloop.counter }}</h3>
          <p>{{ question.stem }}</p>

          {% if question.choices.all %}
            {% for choice in question.choices.all %}
              <label class="choice">
                <input
                  type="radio"
                  name="q{{ question.id }}"
                  value="{{ choice.id }}"
                >
                {{ choice.text }}
              </label><br>
            {% endfor %}
          {% endif %}
        </div>
      {% endfor %}

      <button class="btn btn-primary btn-block">
        âœ… Terminer lâ€™examen
      </button>
    </form>
  {% else %}
    <p class="muted">
      Aucune question disponible pour cette section.
    </p>
  {% endif %}

</section>
{% endblock %}
