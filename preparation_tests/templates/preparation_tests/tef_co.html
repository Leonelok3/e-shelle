{% extends "preparation_tests/tef_course_base.html" %}
{% load static %}

{% block title %}TEF â€” Cours CO (ComprÃ©hension Orale) | E-SHELLE{% endblock %}
{% block meta_description %}
Cours TEF CO : stratÃ©gies dâ€™Ã©coute, situations frÃ©quentes, leÃ§ons guidÃ©es et entraÃ®nement progressif pour rÃ©ussir la ComprÃ©hension Orale.
{% endblock %}

{% block hero %}
  <div class="hero-kicker">TEF â€¢ ComprÃ©hension Orale</div>
  <h1 class="hero-title">Cours â€“ <span>ComprÃ©hension Orale</span></h1>
  <p class="hero-sub">
    Guide complet pour comprendre les audios du TEF&nbsp;: formats, stratÃ©gies dâ€™Ã©coute et entraÃ®nement ciblÃ©.
  </p>
  <div class="hero-actions">

    {% if lessons %}
      <!-- Nouveau bouton : commence avec la premiÃ¨re leÃ§on -->
      <a class="btn btn-primary"
         href="{% url 'preparation_tests:lesson_session_co' lessons.0.id %}">
        <span class="icon">ğŸ§</span>
        <span>Commencer une session CO</span>
      </a>
    {% else %}
      <a class="btn btn-primary" href="#cours-co">
        <span class="icon">ğŸ§</span>
        <span>Commencer une session CO</span>
      </a>
    {% endif %}

    <a href="{% url 'preparation_tests:exam_detail' 'tef' %}#listening"
       class="btn btn-ghost">
      ğŸ“„ Voir le format officiel TEF
    </a>
  </div>
{% endblock %}

{% block content %}

  <!-- SECTION 1 : STRATÃ‰GIES -->
  <section class="section" id="cours-co">
    <h2 class="section-title">
      <span class="emoji">ğŸ“š</span>
      RÃ©sumÃ© du cours â€” ComprÃ©hension Orale
    </h2>

    <div class="grid">

      <!-- Carte 1 -->
      <article class="card">
        <div class="card-header">
          <div>
            <div class="card-kicker">Objectifs</div>
            <h3 class="card-title">Ce que tu dois maÃ®triser</h3>
          </div>
          <span class="badge badge-pill">B1â€“C1</span>
        </div>
        <ul class="bullet">
          <li>Identifier les infos clÃ©s (heures, lieux, chiffres, montants).</li>
          <li>Comprendre lâ€™intention du locuteur (demander, proposer, refuser, informer).</li>
          <li>RÃ©ussir mÃªme avec une seule Ã©coute.</li>
        </ul>
      </article>

      <!-- Carte 2 -->
      <article class="card">
        <div class="card-header">
          <div>
            <div class="card-kicker">MÃ©thode dâ€™Ã©coute</div>
            <h3 class="card-title">Avant / pendant / aprÃ¨s</h3>
          </div>
          <span class="badge badge-green">MÃ©thode</span>
        </div>
        <ul class="bullet">
          <li><strong>Avant</strong> : lire la question et les options.</li>
          <li><strong>Pendant</strong> : repÃ©rer mots clÃ©s + chiffres + verbes dâ€™action.</li>
          <li><strong>AprÃ¨s</strong> : Ã©liminer 2 choix, choisir la rÃ©ponse logique.</li>
        </ul>
      </article>

      <!-- Carte 3 -->
      <article class="card">
        <div class="card-header">
          <div>
            <div class="card-kicker">Situations frÃ©quentes</div>
            <h3 class="card-title">Ce que tu entends au TEF</h3>
          </div>
          <span class="badge badge-orange">Contexte</span>
        </div>
        <ul class="bullet">
          <li>Annonces (train, avion, bus), appels tÃ©lÃ©phoniques.</li>
          <li>Dialogues quotidiens : travail, administration, services.</li>
          <li>Vie pratique : achats, logement, rendez-vous.</li>
        </ul>
      </article>

    </div>
  </section>

  <!-- SECTION 2 : LISTE DES LEÃ‡ONS -->
  <section class="section">
    <h2 class="section-title">
      <span class="emoji">ğŸ“–</span>
      Cours complets â€” ComprÃ©hension Orale
    </h2>
    <p class="card-kicker">LeÃ§ons guidÃ©es pour entraÃ®ner ton oreille et Ã©viter les piÃ¨ges du TEF.</p>

    {% if lessons %}
      {% for l in lessons %}
        <article class="lesson-card" id="lesson-{{ l.id }}">
          <header class="lesson-header">
            <div>
              <div class="lesson-title">{{ l.title }}</div>
              <div class="lesson-meta">
                <span class="dot"></span>
                <span>Mise Ã  jour : {{ l.updated_at|date:"d/m/Y Ã  H:i" }}</span>
                {% if forloop.first %}
                  <span class="badge badge-green">Nouveau</span>
                {% endif %}
              </div>
            </div>
            <span class="badge badge-pill">CO</span>
          </header>

          <!-- Contenu de la leÃ§on -->
          <div class="lesson-body">
            {{ l.content_html|safe }}
          </div>

          <!-- BOUTON : commencer les exercices liÃ©s -->
          <div class="lesson-actions">
            <a href="{% url 'preparation_tests:lesson_session_co' l.id %}"
               class="btn btn-sm btn-outline">
              ğŸ¯ Commencer les exercices de cette leÃ§on
            </a>
          </div>

        </article>
      {% endfor %}
    {% else %}
      <article class="lesson-card">
        <header class="lesson-header">
          <div>
            <div class="lesson-title">Cours Ã  venir</div>
            <div class="lesson-meta">
              <span class="dot"></span> Arrive bientÃ´t.
            </div>
          </div>
        </header>
        <div class="lesson-body">
          Les premiÃ¨res leÃ§ons CO seront ajoutÃ©es prochainement.  
          En attendant, commence une <strong>session dâ€™entraÃ®nement</strong> pour tâ€™habituer au format.
        </div>
      </article>
    {% endif %}
  </section>

  <!-- SECTION 3 : Mini-atelier -->
  <section class="section">
    <h2 class="section-title">
      <span class="emoji">ğŸ§ </span>
      Mini-atelier â€” Exemple guidÃ©
    </h2>

    <article class="card">
      <div class="card-header">
        <div>
          <div class="card-kicker">Exemple simple</div>
          <h3 class="card-title">Annonce de train</h3>
        </div>
      </div>

      <p class="card-kicker"><em>Texte</em> : Â« Le train pour Lyon partira Ã  <strong>16h40</strong> de la voie B. Â»</p>

      <ul class="bullet">
        <li>Question : <strong>Ã€ quelle heure part le train&nbsp;?</strong></li>
        <li>RÃ©ponse : <strong>16h40</strong>.</li>
      </ul>
    </article>
  </section>

{% endblock %}
