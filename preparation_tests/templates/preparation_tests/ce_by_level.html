{% extends "base.html" %}
{% load static %}

{# ==================================================
   SCOPE STRICT APP ‚Äî OBLIGATOIRE
================================================== #}
{% block body_class %}preparation-tests{% endblock %}
{% block app_scope %}preparation-tests{% endblock %}

{# ==================================================
   SEO ‚Äî TITLE & META
================================================== #}
{% block title %}
Compr√©hension √âcrite {{ level }} ‚Äì Le√ßons & Exercices CECR | Immigration97
{% endblock %}

{% block meta_description %}
Pr√©paration Compr√©hension √âcrite (CE) ‚Äì niveau {{ level }}.
Le√ßons CECR, textes vari√©s et exercices progressifs
pour les examens linguistiques officiels.
{% endblock %}

{# ==================================================
   CSS APP ‚Äî VERSIONN√â (ANTI CACHE)
================================================== #}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/preparation_tests.css' %}?v=20260226">
{% endblock %}

{% block content %}

<!-- ==================================================
HERO ‚Äî COMPR√âHENSION √âCRITE / NIVEAU {{ level }}
================================================== -->
<section class="pt-hero">
  <div class="container pt-fade-up">

    <span class="pt-badge">
      üìñ Compr√©hension √©crite
    </span>

    <h1 class="pt-title">
      Niveau {{ level }}<br>
      Le√ßons & entra√Ænement
      <span class="pt-gradient-primary">CECR</span>
    </h1>

    <p class="pt-lead">
      Acc√®de aux <strong>textes et exercices</strong> du niveau
      <strong>{{ level }}</strong> pour renforcer ta
      compr√©hension √©crite et progresser efficacement
      vers les examens officiels.
    </p>

    {% if cefr %}
      {% include "preparation_tests/partials/_cefr_bar.html" %}
    {% endif %}

  </div>
</section>

<!-- ==================================================
NAVIGATION PR√âPARATION (CO / CE / EE / EO)
================================================== -->
{% include "preparation_tests/partials/_prep_nav.html" %}

<!-- ==================================================
LE√áONS DISPONIBLES
================================================== -->
<section class="pt-section">
  <div class="container">

    <div class="pt-grid-layout">

      <!-- ================= MAIN ================= -->
      <div class="pt-main">

        <h2 class="pt-section-title">
          üìò Le√ßons disponibles
        </h2>

        <div class="pt-modules-grid">

          {% for lesson in lessons %}
            <article class="pt-card pt-card--lesson">

              <h3 class="pt-lesson-title">
                {{ lesson.title }}
              </h3>

              <p class="pt-card-meta">
                Le√ßon CECR ‚Äì niveau {{ level }}
              </p>

              <div class="pt-cta-group">
                <a
                  href="{% url 'preparation_tests:lesson_session' 'CECR' 'ce' lesson.id %}"
                  class="pt-btn-primary"
                >
                  ‚ñ∂ Commencer la le√ßon
                </a>
              </div>

            </article>
          {% empty %}
            <div class="pt-empty">
              Aucune le√ßon disponible pour ce niveau.
            </div>
          {% endfor %}

        </div>

        <div class="pt-back-link">
          <a href="{% url 'preparation_tests:ce_hub' %}" class="pt-btn-secondary">
            ‚Üê Retour au hub Compr√©hension √âcrite
          </a>
        </div>

      </div>

      <!-- ================= SIDEBAR ================= -->
      <aside class="pt-side">

        <div class="pt-card pt-card--side">

          <h3>Pourquoi ces le√ßons ?</h3>

          <ul class="pt-side-list">
            <li>Lire rapidement et efficacement</li>
            <li>Rep√©rer les informations cl√©s</li>
            <li>Comprendre le vocabulaire en contexte</li>
            <li>Progresser selon le CECR</li>
          </ul>

          <p class="pt-small">
            üí° Termine les le√ßons pour d√©bloquer
            les examens blancs et le feedback
            du <strong>Coach IA</strong>.
          </p>

        </div>

      </aside>

    </div>

  </div>
</section>

{% endblock %}
