{% extends "base.html" %}
{% load static %}

{# ==================================================
   SCOPE STRICT APP
================================================== #}
{% block body_class %}preparation-tests{% endblock %}
{% block app_scope %}preparation-tests{% endblock %}

{# ==================================================
   SEO ‚Äî TITLE & META
================================================== #}
{% block title %}
Compr√©hension √âcrite ‚Äì Parcours CECR A1 √† C2 | Immigration97
{% endblock %}

{% block meta_description %}
Parcours complet de Compr√©hension √âcrite (CE) selon le CECR.
Progresse du niveau A1 au C2 avec des textes vari√©s,
exercices progressifs et suivi intelligent Immigration97.
{% endblock %}

{# ==================================================
   CSS APP ‚Äî VERSIONN√â
================================================== #}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/preparation_tests.css' %}?v=20260226">
{% endblock %}

{% block content %}

<!-- ==================================================
HERO ‚Äî PARCOURS COMPR√âHENSION √âCRITE
================================================== -->
<section class="pt-hero">
  <div class="container pt-fade-up">

    <span class="pt-badge">
      üìñ Compr√©hension √©crite
    </span>

    <h1 class="pt-title">
      Parcours CECR<br>
      de <span class="pt-gradient-primary">A1</span> √†
      <span class="pt-gradient-primary">C2</span>
    </h1>

    <p class="pt-lead">
      Progresse √©tape par √©tape en
      <strong>compr√©hension √©crite</strong>
      selon le <strong>Cadre Europ√©en Commun de R√©f√©rence</strong>.
      Textes, exercices progressifs et suivi intelligent
      pour r√©ussir les examens linguistiques officiels.
    </p>

    {% include "preparation_tests/partials/_cefr_bar.html" %}

  </div>
</section>

<!-- ==================================================
NIVEAUX CECR
================================================== -->
<section class="pt-section">
  <div class="container">

    <header class="pt-section-header">
      <h2>
        üìö Niveaux disponibles
      </h2>
      <p>
        Chaque niveau correspond √† des comp√©tences
        linguistiques pr√©cises selon le CECR.
        Progresse √† ton rythme et d√©bloque les niveaux
        sup√©rieurs en compl√©tant les le√ßons.
      </p>
    </header>

    <div class="pt-level-grid">

      {% for l in levels %}
      <article class="pt-card pt-card--level">

        <!-- BADGE NIVEAU -->
        <span class="pt-level-badge pt-level-{{ l.level|lower }}">
          {{ l.level }}
        </span>

        <h3 class="pt-level-title">
          Niveau {{ l.level }}
        </h3>

        <p class="pt-card-meta">
          {{ l.completed }} / {{ l.total }} le√ßons compl√©t√©es
        </p>

        <!-- PROGRESSION -->
        <div class="pt-progress">
          <div class="pt-progress-bar">
            <div
              class="pt-progress-fill"
              style="width: {{ l.progress_pct }}%;"
            ></div>
          </div>
          <span class="pt-progress-text">
            {{ l.progress_pct }} %
          </span>
        </div>

        <!-- ACTION -->
        <div class="pt-cta-group">
          <a
            href="{% url 'preparation_tests:ce_by_level' l.level %}"
            class="pt-btn-primary"
          >
            ‚ñ∂ Acc√©der au niveau {{ l.level }}
          </a>
        </div>

      </article>
      {% empty %}
      <div class="pt-empty">
        Aucun niveau disponible pour l'instant.
        Les le√ßons de Compr√©hension √âcrite seront bient√¥t disponibles.
      </div>
      {% endfor %}

    </div>

  </div>
</section>

{% endblock %}
