{% extends "base.html" %}
{# Title optimis√© pour le SEO (conserve le bloc existant) #}
{% block title %}G√©n√©rateur de Photo Conforme pour Visa ¬∑ Immigration97{% endblock %}

{# Si ton base.html propose un bloc meta/head appel√© 'meta' il sera utilis√©. Sinon ces balises seront ignor√©es proprement. #}
{% block meta %}
  <meta name="description" content="G√©n√©rez une photo conforme pour tout type de visa (DV Lottery, France, Canada, UK). Validation automatique, centrage du visage et t√©l√©chargement du fichier pr√™t √† d√©poser. Aper√ßu gratuit avant t√©l√©chargement.">
  <link rel="canonical" href="{{ request.build_absolute_uri }}">
  <meta property="og:title" content="G√©n√©rateur de Photo Conforme pour Visa ‚Äî Immigration97">
  <meta property="og:description" content="T√©l√©versez, choisissez le type de visa, obtenez une photo conforme valid√©e automatiquement. Aper√ßu gratuit.">
  <meta property="og:type" content="website">
  <meta property="og:image" content="{{ request.build_absolute_uri }}static/img/photo_ok.jpg">
  <meta name="twitter:card" content="summary_large_image">
{% endblock %}

{% block content %}
<main class="container">

  <!-- JSON-LD Schema pour SEO (service + FAQ + organisation minimale) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Service",
    "name": "G√©n√©rateur de Photo Conforme pour Visa",
    "provider": {
      "@type": "Organization",
      "name": "Immigration97",
      "url": "{{ request.build_absolute_uri }}"
    },
    "description": "G√©n√©rez des photos conformes aux exigences des ambassades (DV Lottery, France, Canada, UK). Validation automatique, centrage du visage et fichier pr√™t √† d√©poser.",
    "url": "{{ request.build_absolute_uri }}",
    "serviceType": "Photo de visa conforme",
    "areaServed": {"@type": "Country", "name": "Global"}
  }
  </script>

  <!-- HERO : gros titre orient√© conversion -->
  <header class="hero text-center" role="banner" aria-label="G√©n√©rateur de photo conforme">
    <h1 class="h1 text-gradient">Bienvenue ‚Äî G√©n√©rateur de photo conforme pour tout type de visa</h1>
    <p class="lead mt-3">
      Assist√© par <strong>intelligence artificielle</strong> ‚Äî s√©lectionnez le type de visa, t√©l√©versez votre photo et laissez-nous faire le reste.
    </p>

    <p class="mt-4">
      <a href="#upload" class="btn btn-primary btn-lg" aria-label="G√©n√©rer ma photo conforme">üì∏ G√©n√©rer ma photo conforme ‚Äî Aper√ßu gratuit</a>
      <a href="#specifications" class="btn btn-outline ml-3" aria-label="Voir les sp√©cifications">Voir sp√©cifications</a>
    </p>

    <p class="muted text-sm mt-3">Aper√ßu gratuit avant toute op√©ration payante ¬∑ Confidentialit√© garantie ¬∑ Suppression automatique possible apr√®s 24h.</p>
  </header>

  <section class="panel mt-8" aria-labelledby="benefits-heading">
    <h2 id="benefits-heading" class="sr-only">Avantages du service</h2>
    <div class="benefits" role="list" aria-label="Avantages">
      <div class="badge" role="listitem">‚úÖ Conformit√© automatique</div>
      <div class="badge" role="listitem">üîé D√©tection & centrage du visage</div>
      <div class="badge" role="listitem">üéØ Fond homog√®ne & compression</div>
      <div class="badge" role="listitem">üìÅ Fichier pr√™t √† d√©poser</div>
    </div>

    <hr class="divider my-6" />

    <!-- ===== FORMULAIRE DE T√âL√âVERSEMENT (inchang√© c√¥t√© logique) ===== -->
    <div id="upload" class="upload-box" aria-labelledby="upload-heading">
      <h2 id="upload-heading" class="text-xl font-semibold mb-4 text-center">T√©l√©versez votre photo ‚Äî simple & rapide</h2>

      <form method="post" enctype="multipart/form-data" action="{% url 'photos:submit' %}">
        {% csrf_token %}
        {{ form.non_field_errors }}

        <div class="form-row mb-4">
          <label for="id_photo_type" class="block mb-1">Type de photo</label>
          {{ form.photo_type }}
          <p class="muted text-sm mt-1">Ex : DV Lottery (Green Card), Visa France, Visa Canada, Visa UK.</p>
        </div>

        <div class="form-row mb-2">
          <label for="id_image" class="block mb-1">Choisir une image (JPEG / PNG)</label>
          {{ form.image }}
          <p class="muted text-sm mt-1">Format recommand√© : photo face cam√©ra, fond uni, sans ombre. Taille maximum : 10MB.</p>
        </div>

        <button type="submit" class="btn btn-primary w-full mt-4" aria-label="G√©n√©rer la photo conforme">
          üì∏ G√©n√©rer ma photo conforme ‚Äî Aper√ßu gratuit
        </button>
      </form>

      <p class="muted text-center mt-3 text-sm">
        *L‚Äôaper√ßu gratuit s‚Äôaffiche avant le t√©l√©chargement final. Paiement pour t√©l√©chargement final (bient√¥t).
      </p>
    </div>
  </section>

  <hr class="divider my-8" />

  <!-- Sp√©cifications d√©taill√©es, structure accessible -->
  <section id="specifications" class="panel" aria-labelledby="specs-heading">
    <h2 id="specs-heading">Sp√©cifications prises en charge (MVP)</h2>

    <p class="muted mb-4">Nous supportons les formats et contraintes courantes des repr√©sentations officielles. Si vous avez un doute, t√©l√©versez pour un contr√¥le automatique.</p>

    <div class="spec-cards" role="list">
      <article class="spec-card" role="listitem" aria-labelledby="spec-dv">
        <div id="spec-dv" class="spec-title">DV Lottery (Green Card)</div>
        <div class="spec-meta">600√ó600 ¬∑ JPEG</div>
        <p class="muted">Recadrage carr√©, visage centr√©, fond clair et homog√®ne.</p>
      </article>

      <article class="spec-card" role="listitem" aria-labelledby="spec-fr">
        <div id="spec-fr" class="spec-title">Visa France</div>
        <div class="spec-meta">413√ó531 ¬∑ JPEG</div>
        <p class="muted">Rapport & marges conformes aux recommandations fran√ßaises.</p>
      </article>

      <article class="spec-card" role="listitem" aria-labelledby="spec-ca">
        <div id="spec-ca" class="spec-title">Visa Canada</div>
        <div class="spec-meta">591√ó827 ¬∑ JPEG</div>
        <p class="muted">Fond uniforme, t√™te d√©gag√©e, compression contr√¥l√©e.</p>
      </article>

      <article class="spec-card" role="listitem" aria-labelledby="spec-uk">
        <div id="spec-uk" class="spec-title">Visa UK</div>
        <div class="spec-meta">600√ó750 ¬∑ JPEG</div>
        <p class="muted">Centrage automatique et contr√¥le de la luminosit√©.</p>
      </article>
    </div>
  </section>

  <section class="panel" aria-labelledby="how-heading">
    <h3 id="how-heading">Comment √ßa marche ‚Äî 4 √©tapes</h3>
    <ol class="steps" aria-label="√âtapes pour g√©n√©rer la photo conforme">
      <li><strong>Choisissez</strong> le type de photo (DV, France, Canada, UK).</li>
      <li><strong>T√©l√©versez</strong> votre image (JPEG/PNG).</li>
      <li><strong>G√©n√©ration & validation</strong> : traitement automatique + aper√ßu.</li>
      <li><strong>T√©l√©chargez</strong> la photo pr√™te √† d√©poser (paiement bient√¥t disponible).</li>
    </ol>

    <p class="muted text-sm">Astuce : pour un r√©sultat optimal, utilisez une photo r√©cente, visage d√©gag√© et fond uni.</p>
  </section>

  <!-- ASTUCE PHOTO avec images optimis√©es (lazy) -->
  <section class="panel highlight" aria-labelledby="examples-heading">
    <h3 id="examples-heading">Exemples & conseils photo</h3>
    <p class="muted mb-4">Assurez-vous que votre visage soit bien √©clair√© et le fond clair. Voici quelques indications :</p>

    <div class="example-grid" role="list">
      <div class="example good" role="listitem">
        <img src="/static/img/photo_ok.jpg"
             alt="Exemple de photo conforme : visage centr√©, fond clair"
             loading="lazy"
             width="600" height="600">
        <p>‚úÖ Conforme ‚Äî visage centr√©, fond uni</p>
      </div>

      <div class="example bad" role="listitem">
        <img src="/static/img/photo_non_ok.jpg"
             alt="Exemple de photo non conforme : ombre et inclinaison"
             loading="lazy"
             width="600" height="600">
        <p>‚ùå Non conforme ‚Äî ombre, inclinaison ou lunettes r√©fl√©chissantes</p>
      </div>
    </div>
  </section>

  <section class="panel" aria-labelledby="trust-heading">
    <h3 id="trust-heading">Confiance & s√©curit√©</h3>
    <ul class="checklist" aria-label="Mesures de s√©curit√©">
      <li>‚úî Vie priv√©e : <strong>aucune revente</strong> des images.</li>
      <li>‚úî <strong>Suppression automatique</strong> possible apr√®s 24&nbsp;h.</li>
      <li>‚úî Contr√¥les techniques : taille, poids, fond, centrage du visage.</li>
      <li>‚úî Support r√©actif : r√©ponse sous <strong>24&nbsp;heures ouvr√©es</strong>.</li>
    </ul>

    <div class="social-proof mt-4" aria-hidden="true">
      <span class="badge">+10k photos analys√©es</span>
      <span class="badge">4.8/5 (satisfaction)</span>
    </div>
  </section>

  <section class="panel" aria-labelledby="faq-heading">
    <h3 id="faq-heading">FAQ</h3>

    <details class="faq">
      <summary>Ma photo sera-t-elle accept√©e ?</summary>
      <p>Nous appliquons les tailles, formats et marges recommand√©es pour chaque pays. Si la photo n‚Äôest pas conforme (visage trop inclin√©, fond non uniforme, ombre), nous indiquons pr√©cis√©ment le ou les probl√®mes afin que vous puissiez retenter l‚Äôupload apr√®s correction.</p>
    </details>

    <details class="faq">
      <summary>Quel est le format final ?</summary>
      <p>JPEG optimis√© selon la sp√©cification demand√©e (par ex. <strong>600√ó600 px</strong> pour DV Lottery). Nom de fichier pr√™t √† d√©poser sur le formulaire officiel.</p>
    </details>

    <details class="faq">
      <summary>Le paiement est-il requis ?</summary>
      <p>Actuellement, l‚Äôaper√ßu est gratuit. Le t√©l√©chargement final sera payant (option d‚Äôachat int√©gr√©e bient√¥t). Nous afficherons toujours le prix avant paiement.</p>
    </details>

    <details class="faq">
      <summary>Confidentialit√© des images</summary>
      <p>Vos images sont trait√©es uniquement pour la g√©n√©ration. Possibilit√© de suppression automatique au bout de 24h. Pas de revente ni d‚Äôusage marketing sans consentement explicite.</p>
    </details>
  </section>

  <footer class="panel muted text-sm" aria-label="Informations l√©gales et contact">
    <p>¬© {{ now.year }} Immigration97 ‚Äî Service de g√©n√©ration de photos conformes. Pour assistance : <a href="/contact">Contactez-nous</a>.</p>
  </footer>
</main>
{% endblock %}
