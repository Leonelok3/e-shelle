{% extends "base.html" %}
{% block title %}RÃ©sultat Â· Photo Visa & DV Lottery{% endblock %}



{% block content %}


<div class="result-wrap hover-zoom">
  <div class="result-head">
    {% if photo.photo_type == "dv_lottery" %}
      <h2>ğŸ¯ Photo conforme DV Lottery (600Ã—600)</h2>
      <p class="muted">Votre photo respecte 100% les exigences officielles de la DV Lottery. Vous Ãªtes prÃªt Ã  soumettre votre candidature !</p>
    {% else %}
      <h2>ğŸ“¸ Photo gÃ©nÃ©rÃ©e avec succÃ¨s</h2>
      <p class="muted">Votre photo a Ã©tÃ© optimisÃ©e pour un rendu professionnel : visage centrÃ©, fond net et format officiel.</p>
    {% endif %}
  </div>

  <div class="preview-grid">
    <div class="card">
      <div class="card-title">Avant</div>
      <img class="photo-preview" src="{{ photo.image.url }}" alt="Photo originale">
    </div>
    <div class="card arrow">â†’</div>
    <div class="card">
      <div class="card-title">AprÃ¨s</div>
      <div class="processed-wrap">
        <img class="photo-preview processed"
             src="{% if photo.processed_image %}{{ photo.processed_image.url }}{% else %}{{ photo.image.url }}{% endif %}"
             alt="Photo traitÃ©e conforme">
        {% if not has_access %}
          <div class="watermark">APERÃ‡U</div>
        {% endif %}
      </div>
      <ul class="checklist">
        <li>Recadrage parfait ({{ photo.width|default:"600" }}Ã—{{ photo.height|default:"600" }})</li>
        <li>Visage dÃ©tectÃ© & centrÃ©</li>
        <li>Fond clair & homogÃ¨ne</li>
        <li>Compression JPEG optimisÃ©e</li>
      </ul>
    </div>
  </div>

  <!-- âœ… Zone CTA amÃ©liorÃ©e avec tÃ©lÃ©chargement conditionnel -->
  <div class="cta-banner">
    <div class="cta-banner__text">
      <div class="cta-banner__title">âœ… Photo conforme prÃªte !</div>
      <div class="cta-banner__subtitle">
        DÃ©bloquez votre tÃ©lÃ©chargement HD sans filigrane et obtenez votre guide DV Lottery exclusif.
      </div>
    </div>

    {% if has_access %}
      <div class="cta-row">
        <a class="btn btn-primary" href="{% url 'photos:download' pk=photo.pk %}">â¬‡ï¸ TÃ©lÃ©charger la photo HD</a>
      </div>
      <p class="muted small">Merci d'avoir validÃ© votre code. Votre photo HD est disponible sans filigrane.</p>
    {% else %}
      <div class="cta-row">
        <a class="btn btn-primary" href="{% url 'billing:buy' %}">ğŸ’³ Acheter un code d'accÃ¨s</a>
      </div>
      <a class="btn btn--ghost" href="{% url 'billing:redeem' %}?next={{ request.path|urlencode }}">ğŸ”‘ J'ai dÃ©jÃ  un code</a>
      <p class="muted small">
        Paiement possible via <strong>Orange Money</strong>, <strong>MTN MoMo</strong> ou carte.<br>
        AccÃ¨s valable 30 jours, assistance incluse.
      </p>
    {% endif %}

    <div style="margin-top:1.5rem;">
      <a class="btn btn--ghost" href="{% url 'photos:index' %}">â†©ï¸ Traiter une autre photo</a>
    </div>
  </div>

  <!-- DÃ©tails techniques -->
  <div class="spec-box">
    <h3>ğŸ§¾ DÃ©tails techniques</h3>
    <div class="spec-grid">
      <div><strong>Taille finale</strong><br>600Ã—600 px</div>
      <div><strong>Format</strong><br>JPEG optimisÃ©</div>
      <div><strong>Fond</strong><br>Clair et homogÃ¨ne</div>
      <div><strong>Poids</strong><br>AdaptÃ© pour la DV Lottery</div>
    </div>
  </div>

  <!-- Partage / Affiliation -->
  <div class="share-box">
    <h3>ğŸ”¥ Partagez et gagnez !</h3>
    <p>
      Parrainez vos amis et recevez des <strong>crÃ©dits Shelles</strong> utilisables sur tous nos services (photo, visa, documentsâ€¦).
    </p>
    <a href="#" class="btn btn--ghost">ğŸ¤ Rejoindre le programme d'affiliation</a>
  </div>
</div>
{% endblock %}